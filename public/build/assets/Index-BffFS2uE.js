import{r as y,j as e,y as c,T as t,D as h,z as s,B as n,a6 as v,H as W,J as A,K as T,L as C,M as r,O as R,Q as U,R as B,S as V,I as F,U as H,W as L,s as N,V as z}from"./vendor-mui-core-DSrMDzQK.js";import{u as M,H as q}from"./vendor-inertia-D0celjUq.js";import{S as E}from"./layouts-XmNXNaBG.js";import{t as p,V as G,d as O}from"./vendor-mui-icons-BfL4mwRo.js";import"./vendor-react-zq6P3Ky3.js";import"./components-kagBm8H-.js";import"./pages-profile-3giIzxLj.js";const J=N("input")({clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:1,overflow:"hidden",position:"absolute",bottom:0,left:0,whiteSpace:"nowrap",width:1});function te({payments:d=[],submissions:P=[]}){const[S,m]=y.useState(!1),[b,f]=y.useState(null),{data:a,setData:x,post:D,processing:u,errors:i,reset:_}=M({submission_id:"",amount:"",payment_proof:null}),k=o=>{f(o),x({submission_id:o.id,amount:"",payment_proof:null}),m(!0)},l=()=>{m(!1),f(null),_()},w=o=>{o.preventDefault(),D(route("payments.store"),{forceFormData:!0,onSuccess:()=>{l()}})},j=P.filter(o=>{const g=d.find(I=>I.submission_id===o.id);return o.status&&o.status.toLowerCase()==="accepted"&&(!g||!g.verified)});return e.jsxs(E,{children:[e.jsx(q,{title:"Payments"}),e.jsxs(c,{sx:{p:3},children:[e.jsx(t,{variant:"h4",gutterBottom:!0,sx:{fontWeight:"bold",color:"#1abc9c",mb:3},children:"My Payments"}),j.length>0&&e.jsxs(h,{elevation:0,sx:{p:3,mb:3,border:"1px solid #e0e0e0",borderRadius:2,backgroundColor:"#fff8e1"},children:[e.jsx(t,{variant:"h6",gutterBottom:!0,sx:{fontWeight:600,color:"#f57c00"},children:"⚠️ Submissions Requiring Payment"}),e.jsx(t,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"The following submissions need payment proof upload"}),e.jsx(s,{container:!0,spacing:2,children:j.map(o=>e.jsx(s,{item:!0,xs:12,children:e.jsxs(h,{sx:{p:2,display:"flex",justifyContent:"space-between",alignItems:"center",border:"1px solid #e0e0e0"},children:[e.jsxs(c,{children:[e.jsx(t,{variant:"subtitle1",sx:{fontWeight:600},children:o.title}),e.jsxs(t,{variant:"body2",color:"text.secondary",children:["Submitted: ",new Date(o.created_at).toLocaleDateString("id-ID")]})]}),e.jsx(n,{variant:"contained",startIcon:e.jsx(p,{}),onClick:()=>k(o),sx:{backgroundColor:"#1abc9c","&:hover":{backgroundColor:"#16a085"}},children:"Upload Payment"})]})},o.id))})]}),e.jsxs(h,{elevation:0,sx:{p:3,border:"1px solid #e0e0e0",borderRadius:2},children:[e.jsx(t,{variant:"h6",gutterBottom:!0,sx:{fontWeight:600,mb:2},children:"Payment History"}),d.length===0?e.jsx(v,{severity:"info",children:"No payment records found. Upload your payment proof after submitting a paper."}):e.jsx(W,{children:e.jsxs(A,{children:[e.jsx(T,{children:e.jsxs(C,{sx:{backgroundColor:"#f8f9fa"},children:[e.jsx(r,{sx:{fontWeight:600},children:"Submission Title"}),e.jsx(r,{sx:{fontWeight:600},children:"Amount"}),e.jsx(r,{sx:{fontWeight:600},children:"Status"}),e.jsx(r,{sx:{fontWeight:600},children:"Uploaded At"}),e.jsx(r,{sx:{fontWeight:600},children:"Actions"})]})}),e.jsx(R,{children:d.map(o=>e.jsxs(C,{hover:!0,children:[e.jsx(r,{children:o.submission?.title||"N/A"}),e.jsx(r,{children:o.amount?`Rp ${parseFloat(o.amount).toLocaleString("id-ID")}`:"N/A"}),e.jsx(r,{children:e.jsx(U,{label:o.verified?"Verified":"Pending Verification",color:o.verified?"success":"warning",size:"small"})}),e.jsx(r,{children:o.created_at?new Date(o.created_at).toLocaleDateString("id-ID"):"N/A"}),e.jsx(r,{children:o.payment_proof_url&&e.jsx(n,{size:"small",variant:"outlined",startIcon:e.jsx(G,{}),href:`/storage/${o.payment_proof_url}`,target:"_blank",sx:{color:"#1abc9c",borderColor:"#1abc9c","&:hover":{borderColor:"#16a085",backgroundColor:"rgba(26, 188, 156, 0.04)"}},children:"View Proof"})})]},o.id))})]})})]})]}),e.jsxs(B,{open:S,onClose:l,maxWidth:"sm",fullWidth:!0,children:[e.jsxs(V,{sx:{backgroundColor:"#1abc9c",color:"white",display:"flex",justifyContent:"space-between",alignItems:"center"},children:["Upload Payment Proof",e.jsx(F,{onClick:l,sx:{color:"white"},children:e.jsx(O,{})})]}),e.jsxs("form",{onSubmit:w,children:[e.jsxs(H,{children:[b&&e.jsxs(c,{sx:{mb:3,p:2,backgroundColor:"#f8f9fa",borderRadius:1},children:[e.jsx(t,{variant:"subtitle2",color:"text.secondary",children:"Submission:"}),e.jsx(t,{variant:"body1",sx:{fontWeight:600},children:b.title})]}),e.jsxs(s,{container:!0,spacing:3,children:[e.jsx(s,{item:!0,xs:12,children:e.jsx(L,{fullWidth:!0,label:"Payment Amount (Rp) *",type:"number",value:a.amount,onChange:o=>x("amount",o.target.value),error:!!i.amount,helperText:i.amount||"Enter the amount you paid",required:!0,inputProps:{min:0,step:.01}})}),e.jsx(s,{item:!0,xs:12,children:e.jsxs(c,{sx:{border:"2px dashed #e0e0e0",borderRadius:2,p:3,textAlign:"center",backgroundColor:"#fafafa"},children:[e.jsx(p,{sx:{fontSize:48,color:"#1abc9c",mb:2}}),e.jsx(t,{variant:"subtitle1",sx:{mb:1,fontWeight:600},children:"Upload Payment Proof *"}),e.jsxs(t,{variant:"body2",color:"text.secondary",sx:{mb:2},children:["Upload a screenshot or photo of your payment receipt",e.jsx("br",{}),"(JPG, PNG, or PDF - Max 5MB)"]}),e.jsxs(n,{component:"label",variant:"contained",startIcon:e.jsx(p,{}),sx:{backgroundColor:"#1abc9c","&:hover":{backgroundColor:"#16a085"}},children:["Choose File",e.jsx(J,{type:"file",accept:".jpg,.jpeg,.png,.pdf",onChange:o=>x("payment_proof",o.target.files[0]),required:!0})]}),a.payment_proof&&e.jsxs(t,{variant:"body2",sx:{mt:2,color:"#1abc9c",fontWeight:600},children:["✓ ",a.payment_proof.name]}),i.payment_proof&&e.jsx(t,{variant:"caption",color:"error",display:"block",sx:{mt:1},children:i.payment_proof})]})}),e.jsx(s,{item:!0,xs:12,children:e.jsxs(v,{severity:"info",children:[e.jsx("strong",{children:"Payment Information:"}),e.jsx("br",{}),"Please transfer to the conference account and upload your payment proof here. Admin will verify your payment within 1-2 business days."]})})]})]}),e.jsxs(z,{sx:{p:3},children:[e.jsx(n,{onClick:l,disabled:u,sx:{color:"#666"},children:"Cancel"}),e.jsx(n,{type:"submit",variant:"contained",disabled:u||!a.payment_proof,sx:{backgroundColor:"#1abc9c","&:hover":{backgroundColor:"#16a085"},"&:disabled":{backgroundColor:"#cccccc"}},children:u?"Uploading...":"Upload Payment"})]})]})]})]})}export{te as default};
