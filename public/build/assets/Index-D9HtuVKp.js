import{n as B,r as z,j as e,y as t,T as r,D as p,a9 as W,B as n,H as U,J as F,K as H,L as v,M as s,O as L,Q as w,C as N,A as V,R as M,S as $,I as q,U as E,z as c,W as G,s as O,V as J}from"./vendor-mui-core-DBd5ZEVJ.js";import{u as K,H as Q}from"./vendor-inertia-DG3k1AW_.js";import{S as X}from"./layouts-ChVH87lo.js";import{_ as Y,$ as m,a0 as C,V as P,d as Z}from"./vendor-mui-icons-CJ3FWITC.js";import"./vendor-react-zq6P3Ky3.js";import"./components-Bo7eWyLj.js";import"./pages-profile-CGZybNKO.js";const ee=O("input")({clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:1,overflow:"hidden",position:"absolute",bottom:0,left:0,whiteSpace:"nowrap",width:1});function de({payments:i=[],submissions:R=[]}){const h=B(),b=h.palette.custom;h.palette.mode;const[_,g]=z.useState(!1),[u,j]=z.useState(null),{data:a,setData:x,post:I,processing:f,errors:l,reset:D}=K({submission_id:"",amount:"",payment_proof:null}),T=o=>{j(o),x({submission_id:o.id,amount:"",payment_proof:null}),g(!0)},d=()=>{g(!1),j(null),D()},k=o=>{o.preventDefault(),I(route("payments.store"),{forceFormData:!0,onSuccess:()=>{d()}})},S=R.filter(o=>{const y=i.find(A=>A.submission_id===o.id);return o.status&&o.status.toLowerCase()==="accepted"&&(!y||!y.verified)});return e.jsxs(X,{children:[e.jsx(Q,{title:"Payments"}),e.jsxs(t,{sx:{p:{xs:2,md:3},maxWidth:"1400px",margin:"0 auto"},children:[e.jsxs(t,{sx:{mb:3},children:[e.jsx(r,{sx:{fontWeight:800,color:b.textPrimary,fontSize:{xs:"1.4rem",sm:"1.6rem",md:"1.75rem"},letterSpacing:"-0.02em",lineHeight:1.2},children:"My Payments"}),e.jsx(r,{sx:{color:b.textMuted,fontSize:"0.85rem",mt:.5},children:"Upload payment proofs and track verification status"})]}),S.length>0&&e.jsxs(p,{elevation:0,sx:{p:{xs:2,md:3},mb:3,border:"1px solid #fde68a",borderRadius:"16px",bgcolor:"#fffef5",position:"relative",overflow:"hidden","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,height:"3px",background:"linear-gradient(90deg, #f59e0b, #fbbf24)"}},children:[e.jsxs(t,{sx:{display:"flex",alignItems:"center",gap:1,mb:.5},children:[e.jsx(Y,{sx:{color:"#d97706",fontSize:"1.2rem"}}),e.jsx(r,{sx:{fontWeight:700,color:"#92400e",fontSize:"0.95rem"},children:"Submissions Requiring Payment"})]}),e.jsx(r,{sx:{color:"#a16207",fontSize:"0.8rem",mb:2.5,pl:3.5},children:"The following accepted submissions need payment proof upload"}),e.jsx(W,{spacing:1.5,children:S.map(o=>e.jsxs(p,{elevation:0,sx:{p:{xs:1.5,md:2},display:"flex",flexDirection:{xs:"column",sm:"row"},justifyContent:"space-between",alignItems:{xs:"stretch",sm:"center"},gap:{xs:1.5,sm:2},border:"1px solid #f0f0f0",borderRadius:"12px",bgcolor:"#fff",maxWidth:"700px",transition:"all 0.2s ease","&:hover":{borderColor:"#e5e7eb",boxShadow:"0 2px 8px rgba(0,0,0,0.04)"}},children:[e.jsxs(t,{sx:{minWidth:0},children:[e.jsx(r,{sx:{fontWeight:700,fontSize:"0.9rem",color:"#111827",lineHeight:1.3},noWrap:!0,children:o.title}),e.jsxs(r,{sx:{fontSize:"0.75rem",color:"#9ca3af",mt:.3},children:["Submitted: ",new Date(o.created_at).toLocaleDateString("id-ID")]})]}),e.jsx(n,{variant:"contained",startIcon:e.jsx(m,{sx:{fontSize:"1rem !important"}}),onClick:()=>T(o),sx:{background:"linear-gradient(135deg, #0d7a6a 0%, #1abc9c 100%)",boxShadow:"0 4px 14px rgba(13, 122, 106, 0.25)","&:hover":{background:"linear-gradient(135deg, #0a6b5c 0%, #16a085 100%)",boxShadow:"0 6px 20px rgba(13, 122, 106, 0.35)"},textTransform:"none",borderRadius:"10px",fontWeight:600,fontSize:"0.8rem",px:2.5,py:1,whiteSpace:"nowrap",flexShrink:0,transition:"all 0.2s ease"},children:"Upload Payment"})]},o.id))})]}),e.jsxs(p,{elevation:0,sx:{p:{xs:2,md:3},border:"1px solid #f0f0f0",borderRadius:"16px",bgcolor:"#fff"},children:[e.jsxs(t,{sx:{display:"flex",alignItems:"center",gap:1,mb:2},children:[e.jsx(C,{sx:{color:"#6b7280",fontSize:"1.1rem"}}),e.jsx(r,{sx:{fontWeight:700,fontSize:"1rem",color:"#111827"},children:"Payment History"})]}),i.length===0?e.jsxs(t,{sx:{textAlign:"center",py:{xs:4,md:6},px:2},children:[e.jsx(t,{sx:{width:56,height:56,borderRadius:"14px",bgcolor:"#f3f4f6",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto",mb:2},children:e.jsx(C,{sx:{color:"#9ca3af",fontSize:"1.5rem"}})}),e.jsx(r,{sx:{fontWeight:600,color:"#374151",fontSize:"0.95rem",mb:.5},children:"No payment records yet"}),e.jsx(r,{sx:{color:"#9ca3af",fontSize:"0.8rem"},children:"Upload your payment proof after your submission is accepted"})]}):e.jsxs(e.Fragment,{children:[e.jsx(t,{sx:{display:{xs:"none",md:"block"}},children:e.jsx(U,{children:e.jsxs(F,{children:[e.jsx(H,{children:e.jsxs(v,{sx:{backgroundColor:"#f8fafb"},children:[e.jsx(s,{sx:{fontWeight:700,fontSize:"0.75rem",color:"#6b7280",textTransform:"uppercase",letterSpacing:"0.05em",py:1.5,borderBottom:"2px solid #f0f0f0"},children:"Submission"}),e.jsx(s,{sx:{fontWeight:700,fontSize:"0.75rem",color:"#6b7280",textTransform:"uppercase",letterSpacing:"0.05em",py:1.5,borderBottom:"2px solid #f0f0f0"},children:"Amount"}),e.jsx(s,{sx:{fontWeight:700,fontSize:"0.75rem",color:"#6b7280",textTransform:"uppercase",letterSpacing:"0.05em",py:1.5,borderBottom:"2px solid #f0f0f0"},children:"Status"}),e.jsx(s,{sx:{fontWeight:700,fontSize:"0.75rem",color:"#6b7280",textTransform:"uppercase",letterSpacing:"0.05em",py:1.5,borderBottom:"2px solid #f0f0f0"},children:"Uploaded"}),e.jsx(s,{sx:{fontWeight:700,fontSize:"0.75rem",color:"#6b7280",textTransform:"uppercase",letterSpacing:"0.05em",py:1.5,borderBottom:"2px solid #f0f0f0"},children:"Actions"})]})}),e.jsx(L,{children:i.map(o=>e.jsxs(v,{sx:{transition:"background-color 0.15s ease","&:hover":{bgcolor:"#f9fafb"},"& td":{borderBottom:"1px solid #f3f4f6",py:1.8,fontSize:"0.85rem",color:"#374151"}},children:[e.jsx(s,{children:e.jsx(r,{sx:{fontWeight:600,fontSize:"0.85rem",color:"#111827"},children:o.submission?.title||"N/A"})}),e.jsx(s,{children:e.jsx(r,{sx:{fontWeight:600,fontSize:"0.85rem",fontFamily:"monospace"},children:o.amount?`Rp ${parseFloat(o.amount).toLocaleString("id-ID")}`:"N/A"})}),e.jsx(s,{children:e.jsx(w,{label:o.verified?"Verified":"Pending Verification",size:"small",sx:{fontWeight:700,fontSize:"0.65rem",borderRadius:"8px",...o.verified?{bgcolor:"#ecfdf5",color:"#059669",border:"1px solid #d1fae5"}:{bgcolor:"#fffbeb",color:"#d97706",border:"1px solid #fde68a"}}})}),e.jsx(s,{children:e.jsx(r,{sx:{fontSize:"0.8rem",color:"#6b7280"},children:o.created_at?new Date(o.created_at).toLocaleDateString("id-ID"):"N/A"})}),e.jsx(s,{children:o.payment_proof_url&&e.jsx(n,{size:"small",variant:"outlined",startIcon:e.jsx(P,{sx:{fontSize:"0.9rem !important"}}),href:`/storage/${o.payment_proof_url}`,target:"_blank",sx:{color:"#0d7a6a",borderColor:"#d1fae5",bgcolor:"#f0fdf4",borderRadius:"8px",textTransform:"none",fontWeight:600,fontSize:"0.75rem",px:1.5,"&:hover":{borderColor:"#0d7a6a",bgcolor:"#ecfdf5"}},children:"View Proof"})})]},o.id))})]})})}),e.jsx(t,{sx:{display:{xs:"block",md:"none"}},children:e.jsx(W,{spacing:1.5,children:i.map(o=>e.jsx(N,{variant:"outlined",sx:{borderRadius:"14px",border:"1px solid #f0f0f0",transition:"all 0.2s ease","&:hover":{boxShadow:"0 4px 16px rgba(0, 0, 0, 0.06)",borderColor:"#e5e7eb"}},children:e.jsxs(V,{sx:{p:2.5},children:[e.jsxs(t,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1.5},children:[e.jsx(r,{sx:{fontWeight:700,fontFamily:"monospace",fontSize:"0.9rem",color:"#111827"},children:o.amount?`Rp ${parseFloat(o.amount).toLocaleString("id-ID")}`:"N/A"}),e.jsx(w,{label:o.verified?"Verified":"Pending",size:"small",sx:{fontWeight:700,fontSize:"0.65rem",borderRadius:"8px",...o.verified?{bgcolor:"#ecfdf5",color:"#059669",border:"1px solid #d1fae5"}:{bgcolor:"#fffbeb",color:"#d97706",border:"1px solid #fde68a"}}})]}),e.jsx(r,{sx:{fontWeight:600,fontSize:"0.85rem",color:"#374151",mb:.3},children:o.submission?.title||"N/A"}),e.jsxs(r,{sx:{fontSize:"0.75rem",color:"#9ca3af",mb:2},children:["Uploaded: ",o.created_at?new Date(o.created_at).toLocaleDateString("id-ID"):"N/A"]}),o.payment_proof_url&&e.jsx(n,{size:"small",variant:"outlined",fullWidth:!0,startIcon:e.jsx(P,{sx:{fontSize:"0.9rem !important"}}),href:`/storage/${o.payment_proof_url}`,target:"_blank",sx:{color:"#0d7a6a",borderColor:"#d1fae5",bgcolor:"#f0fdf4",borderRadius:"10px",textTransform:"none",fontWeight:600,fontSize:"0.8rem",py:.8,"&:hover":{borderColor:"#0d7a6a",bgcolor:"#ecfdf5"}},children:"View Proof"})]})},o.id))})})]})]})]}),e.jsxs(M,{open:_,onClose:d,maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:"16px",overflow:"hidden"}},children:[e.jsxs($,{sx:{background:"linear-gradient(135deg, #0d7a6a 0%, #1abc9c 100%)",color:"white",display:"flex",justifyContent:"space-between",alignItems:"center",py:2},children:[e.jsx(r,{sx:{fontWeight:700,fontSize:"1.05rem"},children:"Upload Payment Proof"}),e.jsx(q,{onClick:d,sx:{color:"rgba(255,255,255,0.8)","&:hover":{color:"#fff",bgcolor:"rgba(255,255,255,0.15)"}},size:"small",children:e.jsx(Z,{fontSize:"small"})})]}),e.jsxs("form",{onSubmit:k,children:[e.jsxs(E,{sx:{pt:3},children:[u&&e.jsxs(t,{sx:{mb:3,p:2,bgcolor:"#f8fafb",borderRadius:"12px",border:"1px solid #f0f0f0"},children:[e.jsx(r,{sx:{fontSize:"0.7rem",color:"#9ca3af",textTransform:"uppercase",letterSpacing:"0.05em",fontWeight:700,mb:.3},children:"Submission"}),e.jsx(r,{sx:{fontWeight:700,fontSize:"0.9rem",color:"#111827"},children:u.title})]}),e.jsxs(c,{container:!0,spacing:3,children:[e.jsx(c,{item:!0,xs:12,children:e.jsx(G,{fullWidth:!0,label:"Payment Amount (Rp) *",type:"number",value:a.amount,onChange:o=>x("amount",o.target.value),error:!!l.amount,helperText:l.amount||"Enter the amount you paid",required:!0,inputProps:{min:0,step:.01},InputProps:{sx:{borderRadius:"10px"}}})}),e.jsx(c,{item:!0,xs:12,children:e.jsxs(t,{sx:{border:"2px dashed #e5e7eb",borderRadius:"14px",p:{xs:2.5,md:3},textAlign:"center",bgcolor:"#fafafa",transition:"all 0.2s ease","&:hover":{borderColor:"#0d7a6a",bgcolor:"#f0fdf4"}},children:[e.jsx(t,{sx:{width:48,height:48,borderRadius:"12px",bgcolor:"#ecfdf5",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto",mb:1.5},children:e.jsx(m,{sx:{fontSize:"1.4rem",color:"#0d7a6a"}})}),e.jsx(r,{sx:{mb:.5,fontWeight:700,fontSize:"0.9rem",color:"#111827"},children:"Upload Payment Proof *"}),e.jsxs(r,{sx:{mb:2,fontSize:"0.75rem",color:"#9ca3af"},children:["Screenshot or photo of your payment receipt",e.jsx("br",{}),"(JPG, PNG, or PDF — Max 5MB)"]}),e.jsxs(n,{component:"label",variant:"contained",startIcon:e.jsx(m,{sx:{fontSize:"1rem !important"}}),sx:{background:"linear-gradient(135deg, #0d7a6a 0%, #1abc9c 100%)",boxShadow:"none",borderRadius:"10px",textTransform:"none",fontWeight:600,fontSize:"0.8rem",px:3,py:1,"&:hover":{boxShadow:"0 4px 14px rgba(13, 122, 106, 0.3)"}},children:["Choose File",e.jsx(ee,{type:"file",accept:".jpg,.jpeg,.png,.pdf",onChange:o=>x("payment_proof",o.target.files[0]),required:!0})]}),a.payment_proof&&e.jsxs(r,{sx:{mt:2,color:"#059669",fontWeight:700,fontSize:"0.8rem"},children:["✓ ",a.payment_proof.name]}),l.payment_proof&&e.jsx(r,{variant:"caption",color:"error",display:"block",sx:{mt:1},children:l.payment_proof})]})}),e.jsx(c,{item:!0,xs:12,children:e.jsxs(t,{sx:{p:2,bgcolor:"#eff6ff",borderRadius:"12px",border:"1px solid #dbeafe"},children:[e.jsx(r,{sx:{fontWeight:700,fontSize:"0.8rem",color:"#1e40af",mb:.5},children:"Payment Information"}),e.jsx(r,{sx:{fontSize:"0.75rem",color:"#3b82f6",lineHeight:1.6},children:"Please transfer to the conference account and upload your payment proof here. Admin will verify your payment within 1-2 business days."})]})})]})]}),e.jsxs(J,{sx:{p:2.5,gap:1},children:[e.jsx(n,{onClick:d,disabled:f,sx:{color:"#6b7280",textTransform:"none",fontWeight:600,borderRadius:"10px",px:2.5},children:"Cancel"}),e.jsx(n,{type:"submit",variant:"contained",disabled:f||!a.payment_proof,sx:{background:"linear-gradient(135deg, #0d7a6a 0%, #1abc9c 100%)",boxShadow:"0 4px 14px rgba(13, 122, 106, 0.25)","&:hover":{boxShadow:"0 6px 20px rgba(13, 122, 106, 0.35)"},"&:disabled":{background:"#e5e7eb",color:"#9ca3af",boxShadow:"none"},textTransform:"none",borderRadius:"10px",fontWeight:700,fontSize:"0.85rem",px:3,py:1},children:f?"Uploading...":"Upload Payment"})]})]})]})]})}export{de as default};
