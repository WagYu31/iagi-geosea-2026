import{r as u,j as e,y as d,T as o,D as x,ah as C,aj as N,W,X as b,Y as y,Z as n,H as I,J as L,K as D,L as v,M as l,O as H,Q as m}from"./vendor-mui-core-D_NbP6si.js";import{H as F}from"./vendor-inertia-CAqK85rr.js";import{S as z}from"./layouts-BiTKIhZ8.js";import{G as B,k}from"./vendor-mui-icons-CxVUbmp7.js";import"./vendor-react-zq6P3Ky3.js";import"./components-CcNZsbtG.js";import"./pages-profile-Ct8LbS6c.js";function K({submissions:h=[]}){const[f,w]=u.useState(""),[j,T]=u.useState("highest"),[p,A]=u.useState("all"),g=r=>{if(!r||r.length===0)return"N/A";const s=r.filter(t=>t.overall_score);return s.length===0?"N/A":(s.reduce((t,c)=>t+parseInt(c.overall_score,10),0)/s.length).toFixed(1)},_=r=>{switch(r?.toLowerCase()){case"accepted":return"success";case"rejected":return"error";case"under_review":case"under review":return"info";case"revision_required_phase1":case"revision_required_phase2":return"warning";default:return"default"}};let i=h.filter(r=>r.title?.toLowerCase().includes(f.toLowerCase())||r.user?.name?.toLowerCase().includes(f.toLowerCase()));j!=="none"&&(i=[...i].sort((r,s)=>{const a=g(r.reviews),t=g(s.reviews);if(a==="N/A"&&t==="N/A")return 0;if(a==="N/A")return 1;if(t==="N/A")return-1;const c=parseFloat(a),S=parseFloat(t);return j==="highest"?S-c:c-S}));const R=i.length;return p!=="all"&&(i=i.slice(0,parseInt(p))),e.jsxs(z,{children:[e.jsx(F,{title:"Daftar Nilai"}),e.jsxs(d,{sx:{p:3},children:[e.jsxs(d,{sx:{display:"flex",alignItems:"center",gap:2,mb:3},children:[e.jsx(B,{sx:{fontSize:40,color:"#006838"}}),e.jsx(o,{variant:"h4",sx:{fontWeight:"bold",color:"#006838"},children:"Daftar Nilai (Scores)"})]}),e.jsx(x,{elevation:0,sx:{p:2,mb:3,border:"1px solid #e0e0e0",borderRadius:2},children:e.jsxs(d,{sx:{display:"flex",gap:2,flexWrap:"wrap"},children:[e.jsx(C,{fullWidth:!0,placeholder:"Search by title or author...",value:f,onChange:r=>w(r.target.value),InputProps:{startAdornment:e.jsx(N,{position:"start",children:e.jsx(k,{sx:{color:"text.secondary"}})})},sx:{flex:1,minWidth:300}}),e.jsxs(W,{sx:{minWidth:200},children:[e.jsx(b,{children:"Sort by Score"}),e.jsxs(y,{value:j,label:"Sort by Score",onChange:r=>T(r.target.value),children:[e.jsx(n,{value:"highest",children:"Highest to Lowest"}),e.jsx(n,{value:"lowest",children:"Lowest to Highest"}),e.jsx(n,{value:"none",children:"No Sorting"})]})]}),e.jsxs(W,{sx:{minWidth:160},children:[e.jsx(b,{children:"Show Top"}),e.jsxs(y,{value:p,label:"Show Top",onChange:r=>A(r.target.value),children:[e.jsxs(n,{value:"all",children:["All (",R,")"]}),e.jsx(n,{value:"50",children:"Top 50"}),e.jsx(n,{value:"20",children:"Top 20"}),e.jsx(n,{value:"10",children:"Top 10"}),e.jsx(n,{value:"3",children:"Top 3"})]})]})]})}),e.jsx(x,{elevation:0,sx:{border:"1px solid #e0e0e0",borderRadius:2},children:e.jsx(I,{children:e.jsxs(L,{children:[e.jsx(D,{children:e.jsxs(v,{sx:{backgroundColor:"#f8f9fa"},children:[e.jsx(l,{sx:{fontWeight:600},children:"ID"}),e.jsx(l,{sx:{fontWeight:600},children:"Title"}),e.jsx(l,{sx:{fontWeight:600},children:"Author"}),e.jsx(l,{sx:{fontWeight:600},children:"Status"}),e.jsx(l,{sx:{fontWeight:600},children:"Reviewers"}),e.jsx(l,{sx:{fontWeight:600},align:"center",children:"Average Score"}),e.jsx(l,{sx:{fontWeight:600},children:"Scores Detail"})]})}),e.jsx(H,{children:i.length===0?e.jsx(v,{children:e.jsx(l,{colSpan:7,align:"center",sx:{py:4},children:e.jsx(o,{color:"text.secondary",children:"No submissions found"})})}):i.map(r=>{const s=g(r.reviews),a=r.reviews?.filter(t=>t.overall_score)||[];return e.jsxs(v,{hover:!0,children:[e.jsxs(l,{children:["#",r.id]}),e.jsx(l,{sx:{maxWidth:300},children:e.jsx(o,{variant:"body2",sx:{fontWeight:500},children:r.title})}),e.jsx(l,{children:r.user?.name||"Unknown"}),e.jsx(l,{children:e.jsx(m,{label:r.status,size:"small",color:_(r.status)})}),e.jsxs(l,{children:[e.jsxs(o,{variant:"body2",children:[r.reviews?.length||0," assigned"]}),e.jsxs(o,{variant:"caption",color:"text.secondary",children:[a.length," completed"]})]}),e.jsx(l,{align:"center",children:s!=="N/A"?e.jsx(d,{sx:{display:"inline-flex",flexDirection:"column",alignItems:"center",bgcolor:s>=70?"#d4edda":s>=50?"#fff3cd":"#f8d7da",color:s>=70?"#155724":s>=50?"#856404":"#721c24",px:2,py:1,borderRadius:1,minWidth:80},children:e.jsx(o,{variant:"h6",sx:{fontWeight:700,lineHeight:1},children:s})}):e.jsx(m,{label:"No Scores",size:"small",variant:"outlined"})}),e.jsx(l,{children:a.length>0?e.jsx(d,{sx:{display:"flex",flexDirection:"column",gap:.5},children:a.map((t,c)=>e.jsxs(d,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsxs(o,{variant:"caption",sx:{fontWeight:600,minWidth:80},children:["Reviewer ",c+1,":"]}),e.jsx(m,{label:t.overall_score,size:"small",sx:{bgcolor:t.overall_score>=70?"#e8f5e9":t.overall_score>=50?"#fff9c4":"#ffebee",color:t.overall_score>=70?"#2e7d32":t.overall_score>=50?"#f57c00":"#c62828",fontWeight:600}})]},c))}):e.jsx(o,{variant:"caption",color:"text.secondary",sx:{fontStyle:"italic"},children:"No scores yet"})})]},r.id)})})]})})}),e.jsxs(d,{sx:{mt:3,display:"flex",gap:2,flexWrap:"wrap"},children:[e.jsxs(x,{elevation:0,sx:{p:2,border:"1px solid #e0e0e0",borderRadius:2,flex:1,minWidth:200},children:[e.jsx(o,{variant:"caption",color:"text.secondary",sx:{fontWeight:600},children:"Total Submissions"}),e.jsx(o,{variant:"h4",sx:{fontWeight:700,color:"#006838"},children:h.length})]}),e.jsxs(x,{elevation:0,sx:{p:2,border:"1px solid #e0e0e0",borderRadius:2,flex:1,minWidth:200},children:[e.jsx(o,{variant:"caption",color:"text.secondary",sx:{fontWeight:600},children:"With Scores"}),e.jsx(o,{variant:"h4",sx:{fontWeight:700,color:"#1976d2"},children:h.filter(r=>r.reviews?.some(s=>s.overall_score)).length})]}),e.jsxs(x,{elevation:0,sx:{p:2,border:"1px solid #e0e0e0",borderRadius:2,flex:1,minWidth:200},children:[e.jsx(o,{variant:"caption",color:"text.secondary",sx:{fontWeight:600},children:"Pending Review"}),e.jsx(o,{variant:"h4",sx:{fontWeight:700,color:"#f57c00"},children:h.filter(r=>!r.reviews?.some(s=>s.overall_score)).length})]})]})]})]})}export{K as default};
