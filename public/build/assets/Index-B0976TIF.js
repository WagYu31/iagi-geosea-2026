import{n as F,r as W,j as e,y as t,T as r,aa as h,V as v,B as i,W as H,X as L,Y as N,Z as w,$ as s,a0 as U,Q as C,K as V,L as $,a1 as q,a2 as M,I as E,a3 as G,J as f,C as J,s as O,a4 as Y}from"./vendor-mui-core-BP7c3UfX.js";import{u as K,H as Q}from"./vendor-inertia-9DL0UMyN.js";import{S as X}from"./layouts-D0TRlhgN.js";import{ag as Z,ah as b,R as P,b as R,s as ee}from"./vendor-mui-icons-C8sdnAIj.js";import"./vendor-react-zq6P3Ky3.js";const oe=O("input")({clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:1,overflow:"hidden",position:"absolute",bottom:0,left:0,whiteSpace:"nowrap",width:1});function le({payments:n=[],submissions:I=[]}){const g=F(),a=g.palette.custom,l=g.palette.mode==="dark",[_,u]=W.useState(!1),[j,S]=W.useState(null),{data:d,setData:p,post:D,processing:m,errors:c,reset:T}=K({submission_id:"",amount:"",payment_proof:null}),k=o=>{S(o),p({submission_id:o.id,amount:"",payment_proof:null}),u(!0)},x=()=>{u(!1),S(null),T()},A=o=>{o.preventDefault(),D(route("payments.store"),{forceFormData:!0,onSuccess:()=>{x()}})},y=I.filter(o=>{const z=n.find(B=>B.submission_id===o.id);return o.status&&o.status.toLowerCase()==="accepted"&&(!z||!z.verified)});return e.jsxs(X,{children:[e.jsx(Q,{title:"Payments"}),e.jsxs(t,{sx:{p:{xs:2,md:3},maxWidth:"1400px",margin:"0 auto"},children:[e.jsxs(t,{sx:{mb:3},children:[e.jsx(r,{sx:{fontWeight:800,color:a.textPrimary,fontSize:{xs:"1.4rem",sm:"1.6rem",md:"1.75rem"},letterSpacing:"-0.02em",lineHeight:1.2},children:"My Payments"}),e.jsx(r,{sx:{color:a.textMuted,fontSize:"0.85rem",mt:.5},children:"Upload payment proofs and track verification status"})]}),y.length>0&&e.jsxs(h,{elevation:0,sx:{p:{xs:2,md:3},mb:3,border:"1px solid #fde68a",borderRadius:"16px",bgcolor:"#fffef5",position:"relative",overflow:"hidden","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,height:"3px",background:"linear-gradient(90deg, #f59e0b, #fbbf24)"}},children:[e.jsxs(t,{sx:{display:"flex",alignItems:"center",gap:1,mb:.5},children:[e.jsx(Z,{sx:{color:"#d97706",fontSize:"1.2rem"}}),e.jsx(r,{sx:{fontWeight:700,color:"#92400e",fontSize:"0.95rem"},children:"Submissions Requiring Payment"})]}),e.jsx(r,{sx:{color:"#a16207",fontSize:"0.8rem",mb:2.5,pl:3.5},children:"The following accepted submissions need payment proof upload"}),e.jsx(v,{spacing:1.5,children:y.map(o=>e.jsxs(h,{elevation:0,sx:{p:{xs:1.5,md:2},display:"flex",flexDirection:{xs:"column",sm:"row"},justifyContent:"space-between",alignItems:{xs:"stretch",sm:"center"},gap:{xs:1.5,sm:2},border:"1px solid #f0f0f0",borderRadius:"12px",bgcolor:"#fff",maxWidth:"700px",transition:"all 0.2s ease","&:hover":{borderColor:"#e5e7eb",boxShadow:"0 2px 8px rgba(0,0,0,0.04)"}},children:[e.jsxs(t,{sx:{minWidth:0},children:[e.jsx(r,{sx:{fontWeight:700,fontSize:"0.9rem",color:"#111827",lineHeight:1.3},noWrap:!0,children:o.title}),e.jsxs(r,{sx:{fontSize:"0.75rem",color:"#9ca3af",mt:.3},children:["Submitted: ",new Date(o.created_at).toLocaleDateString("id-ID")]})]}),e.jsx(i,{variant:"contained",startIcon:e.jsx(b,{sx:{fontSize:"1rem !important"}}),onClick:()=>k(o),sx:{background:"linear-gradient(135deg, #0d7a6a 0%, #1abc9c 100%)",boxShadow:"0 4px 14px rgba(13, 122, 106, 0.25)","&:hover":{background:"linear-gradient(135deg, #0a6b5c 0%, #16a085 100%)",boxShadow:"0 6px 20px rgba(13, 122, 106, 0.35)"},textTransform:"none",borderRadius:"10px",fontWeight:600,fontSize:"0.8rem",px:2.5,py:1,whiteSpace:"nowrap",flexShrink:0,transition:"all 0.2s ease"},children:"Upload Payment"})]},o.id))})]}),e.jsxs(h,{elevation:0,sx:{p:{xs:2,md:3},border:"1px solid #f0f0f0",borderRadius:"16px",bgcolor:"#fff"},children:[e.jsxs(t,{sx:{display:"flex",alignItems:"center",gap:1,mb:2},children:[e.jsx(P,{sx:{color:"#6b7280",fontSize:"1.1rem"}}),e.jsx(r,{sx:{fontWeight:700,fontSize:"1rem",color:"#111827"},children:"Payment History"})]}),n.length===0?e.jsxs(t,{sx:{textAlign:"center",py:{xs:5,md:8},px:2},children:[e.jsxs(t,{sx:{width:80,height:80,borderRadius:"50%",bgcolor:l?"rgba(239, 68, 68, 0.08)":"#fef2f2",border:`2px dashed ${l?"rgba(239, 68, 68, 0.25)":"#fecaca"}`,display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto",mb:3,position:"relative"},children:[e.jsx(P,{sx:{color:l?"#f87171":"#ef4444",fontSize:"2rem"}}),e.jsx(t,{sx:{position:"absolute",width:"60%",height:"3px",bgcolor:l?"#f87171":"#ef4444",borderRadius:"2px",transform:"rotate(-45deg)"}})]}),e.jsx(r,{sx:{fontWeight:700,color:a.textPrimary,fontSize:"1.1rem",mb:1},children:"No Payment Required Yet"}),e.jsx(r,{sx:{color:a.textMuted,fontSize:"0.85rem",maxWidth:480,mx:"auto",lineHeight:1.7},children:"Payment will be required once the abstract has been confirmed as accepted and the participant is declared to have advanced to the next stage."})]}):e.jsxs(e.Fragment,{children:[e.jsx(t,{sx:{display:{xs:"none",md:"block"}},children:e.jsx(H,{children:e.jsxs(L,{children:[e.jsx(N,{children:e.jsxs(w,{sx:{backgroundColor:"#f8fafb"},children:[e.jsx(s,{sx:{fontWeight:700,fontSize:"0.75rem",color:"#6b7280",textTransform:"uppercase",letterSpacing:"0.05em",py:1.5,borderBottom:"2px solid #f0f0f0"},children:"Submission"}),e.jsx(s,{sx:{fontWeight:700,fontSize:"0.75rem",color:"#6b7280",textTransform:"uppercase",letterSpacing:"0.05em",py:1.5,borderBottom:"2px solid #f0f0f0"},children:"Amount"}),e.jsx(s,{sx:{fontWeight:700,fontSize:"0.75rem",color:"#6b7280",textTransform:"uppercase",letterSpacing:"0.05em",py:1.5,borderBottom:"2px solid #f0f0f0"},children:"Status"}),e.jsx(s,{sx:{fontWeight:700,fontSize:"0.75rem",color:"#6b7280",textTransform:"uppercase",letterSpacing:"0.05em",py:1.5,borderBottom:"2px solid #f0f0f0"},children:"Uploaded"}),e.jsx(s,{sx:{fontWeight:700,fontSize:"0.75rem",color:"#6b7280",textTransform:"uppercase",letterSpacing:"0.05em",py:1.5,borderBottom:"2px solid #f0f0f0"},children:"Actions"})]})}),e.jsx(U,{children:n.map(o=>e.jsxs(w,{sx:{transition:"background-color 0.15s ease","&:hover":{bgcolor:"#f9fafb"},"& td":{borderBottom:"1px solid #f3f4f6",py:1.8,fontSize:"0.85rem",color:"#374151"}},children:[e.jsx(s,{children:e.jsx(r,{sx:{fontWeight:600,fontSize:"0.85rem",color:"#111827"},children:o.submission?.title||"N/A"})}),e.jsx(s,{children:e.jsx(r,{sx:{fontWeight:600,fontSize:"0.85rem",fontFamily:"monospace"},children:o.amount?`Rp ${parseFloat(o.amount).toLocaleString("id-ID")}`:"N/A"})}),e.jsx(s,{children:e.jsx(C,{label:o.verified?"Verified":"Pending Verification",size:"small",sx:{fontWeight:700,fontSize:"0.65rem",borderRadius:"8px",...o.verified?{bgcolor:"#ecfdf5",color:"#059669",border:"1px solid #d1fae5"}:{bgcolor:"#fffbeb",color:"#d97706",border:"1px solid #fde68a"}}})}),e.jsx(s,{children:e.jsx(r,{sx:{fontSize:"0.8rem",color:"#6b7280"},children:o.created_at?new Date(o.created_at).toLocaleDateString("id-ID"):"N/A"})}),e.jsx(s,{children:o.payment_proof_url&&e.jsx(i,{size:"small",variant:"outlined",startIcon:e.jsx(R,{sx:{fontSize:"0.9rem !important"}}),href:`/storage/${o.payment_proof_url}`,target:"_blank",sx:{color:"#0d7a6a",borderColor:"#d1fae5",bgcolor:"#f0fdf4",borderRadius:"8px",textTransform:"none",fontWeight:600,fontSize:"0.75rem",px:1.5,"&:hover":{borderColor:"#0d7a6a",bgcolor:"#ecfdf5"}},children:"View Proof"})})]},o.id))})]})})}),e.jsx(t,{sx:{display:{xs:"block",md:"none"}},children:e.jsx(v,{spacing:1.5,children:n.map(o=>e.jsx(V,{variant:"outlined",sx:{borderRadius:"14px",border:"1px solid #f0f0f0",transition:"all 0.2s ease","&:hover":{boxShadow:"0 4px 16px rgba(0, 0, 0, 0.06)",borderColor:"#e5e7eb"}},children:e.jsxs($,{sx:{p:2.5},children:[e.jsxs(t,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1.5},children:[e.jsx(r,{sx:{fontWeight:700,fontFamily:"monospace",fontSize:"0.9rem",color:"#111827"},children:o.amount?`Rp ${parseFloat(o.amount).toLocaleString("id-ID")}`:"N/A"}),e.jsx(C,{label:o.verified?"Verified":"Pending",size:"small",sx:{fontWeight:700,fontSize:"0.65rem",borderRadius:"8px",...o.verified?{bgcolor:"#ecfdf5",color:"#059669",border:"1px solid #d1fae5"}:{bgcolor:"#fffbeb",color:"#d97706",border:"1px solid #fde68a"}}})]}),e.jsx(r,{sx:{fontWeight:600,fontSize:"0.85rem",color:"#374151",mb:.3},children:o.submission?.title||"N/A"}),e.jsxs(r,{sx:{fontSize:"0.75rem",color:"#9ca3af",mb:2},children:["Uploaded: ",o.created_at?new Date(o.created_at).toLocaleDateString("id-ID"):"N/A"]}),o.payment_proof_url&&e.jsx(i,{size:"small",variant:"outlined",fullWidth:!0,startIcon:e.jsx(R,{sx:{fontSize:"0.9rem !important"}}),href:`/storage/${o.payment_proof_url}`,target:"_blank",sx:{color:"#0d7a6a",borderColor:"#d1fae5",bgcolor:"#f0fdf4",borderRadius:"10px",textTransform:"none",fontWeight:600,fontSize:"0.8rem",py:.8,"&:hover":{borderColor:"#0d7a6a",bgcolor:"#ecfdf5"}},children:"View Proof"})]})},o.id))})})]})]})]}),e.jsxs(q,{open:_,onClose:x,maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:"16px",overflow:"hidden"}},children:[e.jsxs(M,{sx:{background:"linear-gradient(135deg, #0d7a6a 0%, #1abc9c 100%)",color:"white",display:"flex",justifyContent:"space-between",alignItems:"center",py:2},children:[e.jsx(r,{sx:{fontWeight:700,fontSize:"1.05rem"},children:"Upload Payment Proof"}),e.jsx(E,{onClick:x,sx:{color:"rgba(255,255,255,0.8)","&:hover":{color:"#fff",bgcolor:"rgba(255,255,255,0.15)"}},size:"small",children:e.jsx(ee,{fontSize:"small"})})]}),e.jsxs("form",{onSubmit:A,children:[e.jsxs(G,{sx:{pt:3},children:[j&&e.jsxs(t,{sx:{mb:3,p:2,bgcolor:"#f8fafb",borderRadius:"12px",border:"1px solid #f0f0f0"},children:[e.jsx(r,{sx:{fontSize:"0.7rem",color:"#9ca3af",textTransform:"uppercase",letterSpacing:"0.05em",fontWeight:700,mb:.3},children:"Submission"}),e.jsx(r,{sx:{fontWeight:700,fontSize:"0.9rem",color:"#111827"},children:j.title})]}),e.jsxs(f,{container:!0,spacing:3,children:[e.jsx(f,{item:!0,xs:12,children:e.jsx(J,{fullWidth:!0,label:"Payment Amount (Rp) *",type:"number",value:d.amount,onChange:o=>p("amount",o.target.value),error:!!c.amount,helperText:c.amount||"Enter the amount you paid",required:!0,inputProps:{min:0,step:.01},InputProps:{sx:{borderRadius:"10px"}}})}),e.jsx(f,{item:!0,xs:12,children:e.jsxs(t,{sx:{border:"2px dashed #e5e7eb",borderRadius:"14px",p:{xs:2.5,md:3},textAlign:"center",bgcolor:"#fafafa",transition:"all 0.2s ease","&:hover":{borderColor:"#0d7a6a",bgcolor:"#f0fdf4"}},children:[e.jsx(t,{sx:{width:48,height:48,borderRadius:"12px",bgcolor:"#ecfdf5",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto",mb:1.5},children:e.jsx(b,{sx:{fontSize:"1.4rem",color:"#0d7a6a"}})}),e.jsx(r,{sx:{mb:.5,fontWeight:700,fontSize:"0.9rem",color:"#111827"},children:"Upload Payment Proof *"}),e.jsxs(r,{sx:{mb:2,fontSize:"0.75rem",color:"#9ca3af"},children:["Screenshot or photo of your payment receipt",e.jsx("br",{}),"(JPG, PNG, or PDF — Max 5MB)"]}),e.jsxs(i,{component:"label",variant:"contained",startIcon:e.jsx(b,{sx:{fontSize:"1rem !important"}}),sx:{background:"linear-gradient(135deg, #0d7a6a 0%, #1abc9c 100%)",boxShadow:"none",borderRadius:"10px",textTransform:"none",fontWeight:600,fontSize:"0.8rem",px:3,py:1,"&:hover":{boxShadow:"0 4px 14px rgba(13, 122, 106, 0.3)"}},children:["Choose File",e.jsx(oe,{type:"file",accept:".jpg,.jpeg,.png,.pdf",onChange:o=>p("payment_proof",o.target.files[0]),required:!0})]}),d.payment_proof&&e.jsxs(r,{sx:{mt:2,color:"#059669",fontWeight:700,fontSize:"0.8rem"},children:["✓ ",d.payment_proof.name]}),c.payment_proof&&e.jsx(r,{variant:"caption",color:"error",display:"block",sx:{mt:1},children:c.payment_proof})]})}),e.jsx(f,{item:!0,xs:12,children:e.jsxs(t,{sx:{p:2,bgcolor:"#eff6ff",borderRadius:"12px",border:"1px solid #dbeafe"},children:[e.jsx(r,{sx:{fontWeight:700,fontSize:"0.8rem",color:"#1e40af",mb:.5},children:"Payment Information"}),e.jsx(r,{sx:{fontSize:"0.75rem",color:"#3b82f6",lineHeight:1.6},children:"Please transfer to the conference account and upload your payment proof here. Admin will verify your payment within 1-2 business days."})]})})]})]}),e.jsxs(Y,{sx:{p:2.5,gap:1},children:[e.jsx(i,{onClick:x,disabled:m,sx:{color:"#6b7280",textTransform:"none",fontWeight:600,borderRadius:"10px",px:2.5},children:"Cancel"}),e.jsx(i,{type:"submit",variant:"contained",disabled:m||!d.payment_proof,sx:{background:"linear-gradient(135deg, #0d7a6a 0%, #1abc9c 100%)",boxShadow:"0 4px 14px rgba(13, 122, 106, 0.25)","&:hover":{boxShadow:"0 6px 20px rgba(13, 122, 106, 0.35)"},"&:disabled":{background:"#e5e7eb",color:"#9ca3af",boxShadow:"none"},textTransform:"none",borderRadius:"10px",fontWeight:700,fontSize:"0.85rem",px:3,py:1},children:m?"Uploading...":"Upload Payment"})]})]})]})]})}export{le as default};
