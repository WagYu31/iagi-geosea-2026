import{r as i,j as e,y as g,T as u,D as j,a4 as h,z as a,ah as r,Z as S,B as v,ai as I}from"./vendor-mui-core-D_NbP6si.js";import{H as W,r as A}from"./vendor-inertia-CAqK85rr.js";import{S as M}from"./layouts-BiTKIhZ8.js";import{i as w,j as G}from"./vendor-mui-icons-CxVUbmp7.js";import"./vendor-react-zq6P3Ky3.js";import"./components-CcNZsbtG.js";import"./pages-profile-Ct8LbS6c.js";function R(){const[p,n]=i.useState(!1),[y,o]=i.useState(!1),[x,f]=i.useState(""),[m,T]=i.useState(""),[d,c]=i.useState(""),[t,_]=i.useState({mail_host:"",mail_port:587,mail_username:"",mail_password:"",mail_encryption:"tls",mail_from_address:"",mail_from_name:"IAGI-GEOSEA 2026"});i.useEffect(()=>{fetch(route("admin.email.settings")).then(s=>s.json()).then(s=>{s.id&&_({mail_host:s.mail_host||"",mail_port:s.mail_port||587,mail_username:s.mail_username||"",mail_password:s.mail_password||"",mail_encryption:s.mail_encryption||"tls",mail_from_address:s.mail_from_address||"",mail_from_name:s.mail_from_name||"IAGI-GEOSEA 2026"})})},[]);const l=(s,C)=>{_(P=>({...P,[s]:C}))},E=()=>{n(!0),f(""),A.post(route("admin.email.save"),t,{preserveScroll:!0,onSuccess:()=>{o(!0),n(!1)},onError:s=>{f(Object.values(s).join(", ")),n(!1)}})},b=()=>{if(!m){c("Please enter a test email address");return}n(!0),fetch(route("admin.email.test"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:JSON.stringify({test_email:m})}).then(s=>s.json()).then(s=>{c(s.message),n(!1)}).catch(s=>{c("Error: "+s.message),n(!1)})};return e.jsxs(M,{children:[e.jsx(W,{title:"SMTP Email Settings"}),e.jsxs(g,{children:[e.jsx(u,{variant:"h4",sx:{mb:3,fontWeight:700,color:"#1a3a4a"},children:"SMTP Email Settings"}),e.jsxs(j,{sx:{p:3,mb:3},children:[e.jsx(u,{variant:"h6",sx:{mb:2,fontWeight:600,color:"primary.main"},children:"Mail Server Configuration"}),x&&e.jsx(h,{severity:"error",sx:{mb:2},children:x}),e.jsxs(a,{container:!0,spacing:2,children:[e.jsx(a,{item:!0,xs:12,md:6,children:e.jsx(r,{fullWidth:!0,label:"SMTP Host",value:t.mail_host,onChange:s=>l("mail_host",s.target.value),placeholder:"smtp.gmail.com",helperText:"SMTP server address"})}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(r,{fullWidth:!0,type:"number",label:"SMTP Port",value:t.mail_port,onChange:s=>l("mail_port",s.target.value),helperText:"Usually 587 or 465"})}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsxs(r,{fullWidth:!0,select:!0,label:"Encryption",value:t.mail_encryption,onChange:s=>l("mail_encryption",s.target.value),children:[e.jsx(S,{value:"tls",children:"TLS"}),e.jsx(S,{value:"ssl",children:"SSL"})]})}),e.jsx(a,{item:!0,xs:12,md:6,children:e.jsx(r,{fullWidth:!0,label:"Username",value:t.mail_username,onChange:s=>l("mail_username",s.target.value),placeholder:"your-email@gmail.com",helperText:"SMTP username (usually your email)"})}),e.jsx(a,{item:!0,xs:12,md:6,children:e.jsx(r,{fullWidth:!0,type:"password",label:"Password",value:t.mail_password,onChange:s=>l("mail_password",s.target.value),placeholder:"Your SMTP password or app password",helperText:"For Gmail, use App Password"})}),e.jsx(a,{item:!0,xs:12,md:6,children:e.jsx(r,{fullWidth:!0,type:"email",label:"From Email Address",value:t.mail_from_address,onChange:s=>l("mail_from_address",s.target.value),placeholder:"noreply@iagi-geosea.com",helperText:"Email address that appears as sender"})}),e.jsx(a,{item:!0,xs:12,md:6,children:e.jsx(r,{fullWidth:!0,label:"From Name",value:t.mail_from_name,onChange:s=>l("mail_from_name",s.target.value),placeholder:"IAGI-GEOSEA 2026",helperText:"Name that appears as sender"})})]}),e.jsx(g,{sx:{mt:3},children:e.jsx(v,{variant:"contained",color:"primary",startIcon:e.jsx(w,{}),onClick:E,disabled:p,sx:{backgroundColor:"#006838","&:hover":{backgroundColor:"#004d28"}},children:"Save SMTP Settings"})})]}),e.jsxs(j,{sx:{p:3},children:[e.jsx(u,{variant:"h6",sx:{mb:2,fontWeight:600,color:"primary.main"},children:"Test Email Configuration"}),e.jsxs(a,{container:!0,spacing:2,alignItems:"center",children:[e.jsx(a,{item:!0,xs:12,md:6,children:e.jsx(r,{fullWidth:!0,type:"email",label:"Test Email Address",value:m,onChange:s=>T(s.target.value),placeholder:"test@example.com",helperText:"Enter email address to send test email"})}),e.jsx(a,{item:!0,xs:12,md:6,children:e.jsx(v,{variant:"contained",color:"secondary",startIcon:e.jsx(G,{}),onClick:b,disabled:p,fullWidth:!0,children:"Send Test Email"})})]}),d&&e.jsx(h,{severity:d.includes("success")?"success":"error",sx:{mt:2},children:d})]})]}),e.jsx(I,{open:y,autoHideDuration:3e3,onClose:()=>o(!1),anchorOrigin:{vertical:"top",horizontal:"right"},children:e.jsx(h,{severity:"success",onClose:()=>o(!1),children:"SMTP settings saved successfully!"})})]})}export{R as default};
