import{r as v,j as e,y as x,T as n,Q as h,C as F,D as H,a4 as S,a5 as W,a6 as b,M as c,U as z,V as B,W as k,X as m,Y as l,Z as P,$ as y}from"./vendor-mui-core-D1diRa6P.js";import{H as q}from"./vendor-inertia-qakM-84m.js";import{S as E}from"./layouts-DsZrxyTC.js";import{G,k as M}from"./vendor-mui-icons-IqymDsEu.js";import"./vendor-react-zq6P3Ky3.js";function Y({submissions:p=[]}){const[f,w]=v.useState(""),[g,I]=v.useState("highest"),[j,A]=v.useState("all"),u=r=>{if(!r||r.length===0)return"N/A";const t=r.filter(s=>s.overall_score);return t.length===0?"N/A":(t.reduce((s,o)=>{const a=parseInt(o.originality_score||0,10),C=parseInt(o.relevance_score||0,10),R=parseInt(o.clarity_score||0,10),N=parseInt(o.methodology_score||0,10),L=parseInt(o.overall_score||0,10),D=(a+C+R+N+L)/5;return s+D},0)/t.length).toFixed(1)},_=r=>{switch(r?.toLowerCase()){case"accepted":return"success";case"rejected":return"error";case"under_review":case"under review":return"info";case"revision_required_phase1":case"revision_required_phase2":return"warning";default:return"default"}};let d=p.filter(r=>r.title?.toLowerCase().includes(f.toLowerCase())||r.user?.name?.toLowerCase().includes(f.toLowerCase()));g!=="none"&&(d=[...d].sort((r,t)=>{const i=u(r.reviews),s=u(t.reviews);if(i==="N/A"&&s==="N/A")return 0;if(i==="N/A")return 1;if(s==="N/A")return-1;const o=parseFloat(i),a=parseFloat(s);return g==="highest"?a-o:o-a}));const T=d.length;return j!=="all"&&(d=d.slice(0,parseInt(j))),e.jsxs(E,{children:[e.jsx(q,{title:"Daftar Nilai"}),e.jsxs(x,{sx:{p:3},children:[e.jsxs(x,{sx:{display:"flex",alignItems:"center",gap:2,mb:3},children:[e.jsx(G,{sx:{fontSize:40,color:"#006838"}}),e.jsx(n,{variant:"h4",sx:{fontWeight:"bold",color:"#006838"},children:"Daftar Nilai (Scores)"})]}),e.jsx(h,{elevation:0,sx:{p:2,mb:3,border:"1px solid #e0e0e0",borderRadius:2},children:e.jsxs(x,{sx:{display:"flex",gap:2,flexWrap:"wrap"},children:[e.jsx(F,{fullWidth:!0,placeholder:"Search by title or author...",value:f,onChange:r=>w(r.target.value),InputProps:{startAdornment:e.jsx(H,{position:"start",children:e.jsx(M,{sx:{color:"text.secondary"}})})},sx:{flex:1,minWidth:300}}),e.jsxs(S,{sx:{minWidth:200},children:[e.jsx(W,{children:"Sort by Score"}),e.jsxs(b,{value:g,label:"Sort by Score",onChange:r=>I(r.target.value),children:[e.jsx(c,{value:"highest",children:"Highest to Lowest"}),e.jsx(c,{value:"lowest",children:"Lowest to Highest"}),e.jsx(c,{value:"none",children:"No Sorting"})]})]}),e.jsxs(S,{sx:{minWidth:160},children:[e.jsx(W,{children:"Show Top"}),e.jsxs(b,{value:j,label:"Show Top",onChange:r=>A(r.target.value),children:[e.jsxs(c,{value:"all",children:["All (",T,")"]}),e.jsx(c,{value:"50",children:"Top 50"}),e.jsx(c,{value:"20",children:"Top 20"}),e.jsx(c,{value:"10",children:"Top 10"}),e.jsx(c,{value:"3",children:"Top 3"})]})]})]})}),e.jsx(h,{elevation:0,sx:{border:"1px solid #e0e0e0",borderRadius:2},children:e.jsx(z,{children:e.jsxs(B,{children:[e.jsx(k,{children:e.jsxs(m,{sx:{backgroundColor:"#f8f9fa"},children:[e.jsx(l,{sx:{fontWeight:600},children:"ID"}),e.jsx(l,{sx:{fontWeight:600},children:"Title"}),e.jsx(l,{sx:{fontWeight:600},children:"Author"}),e.jsx(l,{sx:{fontWeight:600},children:"Status"}),e.jsx(l,{sx:{fontWeight:600},children:"Reviewers"}),e.jsx(l,{sx:{fontWeight:600},align:"center",children:"Average Score"}),e.jsx(l,{sx:{fontWeight:600},children:"Scores Detail"})]})}),e.jsx(P,{children:d.length===0?e.jsx(m,{children:e.jsx(l,{colSpan:7,align:"center",sx:{py:4},children:e.jsx(n,{color:"text.secondary",children:"No submissions found"})})}):d.map(r=>{const t=u(r.reviews),i=r.reviews?.filter(s=>s.overall_score)||[];return e.jsxs(m,{hover:!0,children:[e.jsxs(l,{children:["#",r.id]}),e.jsx(l,{sx:{maxWidth:300},children:e.jsx(n,{variant:"body2",sx:{fontWeight:500},children:r.title})}),e.jsx(l,{children:r.user?.name||"Unknown"}),e.jsx(l,{children:e.jsx(y,{label:r.status,size:"small",color:_(r.status)})}),e.jsxs(l,{children:[e.jsxs(n,{variant:"body2",children:[r.reviews?.length||0," assigned"]}),e.jsxs(n,{variant:"caption",color:"text.secondary",children:[i.length," completed"]})]}),e.jsx(l,{align:"center",children:t!=="N/A"?e.jsx(x,{sx:{display:"inline-flex",flexDirection:"column",alignItems:"center",bgcolor:t>=70?"#d4edda":t>=50?"#fff3cd":"#f8d7da",color:t>=70?"#155724":t>=50?"#856404":"#721c24",px:2,py:1,borderRadius:1,minWidth:80},children:e.jsx(n,{variant:"h6",sx:{fontWeight:700,lineHeight:1},children:t})}):e.jsx(y,{label:"No Scores",size:"small",variant:"outlined"})}),e.jsx(l,{children:i.length>0?e.jsx(x,{sx:{display:"flex",flexDirection:"column",gap:.5},children:i.map((s,o)=>{const a=((parseInt(s.originality_score||0,10)+parseInt(s.relevance_score||0,10)+parseInt(s.clarity_score||0,10)+parseInt(s.methodology_score||0,10)+parseInt(s.overall_score||0,10))/5).toFixed(1);return e.jsxs(x,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsxs(n,{variant:"caption",sx:{fontWeight:600,minWidth:80},children:["Reviewer ",o+1,":"]}),e.jsx(y,{label:a,size:"small",sx:{bgcolor:a>=4?"#e8f5e9":a>=3?"#fff9c4":"#ffebee",color:a>=4?"#2e7d32":a>=3?"#f57c00":"#c62828",fontWeight:600}})]},o)})}):e.jsx(n,{variant:"caption",color:"text.secondary",sx:{fontStyle:"italic"},children:"No scores yet"})})]},r.id)})})]})})}),e.jsxs(x,{sx:{mt:3,display:"flex",gap:2,flexWrap:"wrap"},children:[e.jsxs(h,{elevation:0,sx:{p:2,border:"1px solid #e0e0e0",borderRadius:2,flex:1,minWidth:200},children:[e.jsx(n,{variant:"caption",color:"text.secondary",sx:{fontWeight:600},children:"Total Submissions"}),e.jsx(n,{variant:"h4",sx:{fontWeight:700,color:"#006838"},children:p.length})]}),e.jsxs(h,{elevation:0,sx:{p:2,border:"1px solid #e0e0e0",borderRadius:2,flex:1,minWidth:200},children:[e.jsx(n,{variant:"caption",color:"text.secondary",sx:{fontWeight:600},children:"With Scores"}),e.jsx(n,{variant:"h4",sx:{fontWeight:700,color:"#1976d2"},children:p.filter(r=>r.reviews?.some(t=>t.overall_score)).length})]}),e.jsxs(h,{elevation:0,sx:{p:2,border:"1px solid #e0e0e0",borderRadius:2,flex:1,minWidth:200},children:[e.jsx(n,{variant:"caption",color:"text.secondary",sx:{fontWeight:600},children:"Pending Review"}),e.jsx(n,{variant:"h4",sx:{fontWeight:700,color:"#f57c00"},children:p.filter(r=>!r.reviews?.some(t=>t.overall_score)).length})]})]})]})]})}export{Y as default};
