import{r as B,j as e,y as a,B as n,T as r,a4 as P,D as E,z as s,ah as R,s as U,am as d,C as x,A as h,Q as v}from"./vendor-mui-core-D_NbP6si.js";import{u as q,H as L,r as $}from"./vendor-inertia-CAqK85rr.js";import{S as H}from"./layouts-BOc6nB_l.js";import{w as N,o as M,x as w,t as _,g as A,B as O,D as C,l as k}from"./vendor-mui-icons-DKqmHBrN.js";import"./vendor-react-zq6P3Ky3.js";import"./components-o-v3lFKv.js";import"./pages-profile-DCw2vD_Q.js";const S=U("input")({clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:1,overflow:"hidden",position:"absolute",bottom:0,left:0,whiteSpace:"nowrap",width:1});function X({submission:t,reviews:l=[],isReviewer:W=!1}){const[I,g]=B.useState(!1),{data:c,setData:p,post:z,processing:m,errors:u}=q({title:t.title||"",abstract:t.abstract||"",full_paper_file:null,layouting_file:null,editor_feedback_file:null}),F=o=>{o.preventDefault(),z(route("submissions.update",t.id),{forceFormData:!0,onSuccess:()=>{g(!1)}})},D=o=>{switch(o?.toLowerCase()){case"accepted":return"success";case"rejected":return"error";case"under_review":case"under review":return"info";case"revision_required_phase1":case"revision_required_phase2":case"revision phase 1":case"revision phase 2":case"revision":return"warning";default:return"default"}},T=["revision","revision phase 1","revision phase 2","revision_required_phase1","revision_required_phase2"].includes(t.status?.toLowerCase());return e.jsxs(H,{children:[e.jsx(L,{title:`Submission - ${t.title}`}),e.jsxs(a,{sx:{p:{xs:2,md:3},maxWidth:"1200px",margin:"0 auto"},children:[e.jsxs(a,{sx:{mb:3},children:[e.jsx(n,{startIcon:e.jsx(N,{}),onClick:()=>$.visit(W?route("reviewer.submissions"):route("submissions.index")),sx:{mb:2,color:"#006838",textTransform:"none"},children:"BACK TO SUBMISSIONS"}),e.jsxs(a,{sx:{display:"flex",justifyContent:"space-between",alignItems:"start",flexWrap:"wrap",gap:2},children:[e.jsx(a,{children:e.jsx(r,{variant:"h4",sx:{fontWeight:"bold",color:"#006838",mb:.5},children:"Submission Details"})}),!I&&T&&!W&&e.jsx(n,{variant:"contained",startIcon:e.jsx(M,{}),onClick:()=>g(!0),sx:{backgroundColor:"#006838","&:hover":{backgroundColor:"#004d28"},textTransform:"none"},children:"Edit & Resubmit"})]})]}),T&&l.length>0&&e.jsxs(P,{severity:"warning",sx:{mb:3},icon:e.jsx(w,{}),children:[e.jsx(r,{variant:"subtitle2",sx:{fontWeight:600,mb:.5},children:"Revision Required"}),e.jsx(r,{variant:"body2",children:"Your submission needs revision. Please review the comments below and update your paper accordingly."})]}),I?e.jsxs(E,{elevation:0,sx:{p:{xs:2,md:4},mb:3,border:"1px solid #e0e0e0",borderRadius:2},children:[e.jsx(r,{variant:"h6",gutterBottom:!0,sx:{fontWeight:600,color:"#006838",mb:3},children:"Edit Submission"}),e.jsx(a,{component:"form",onSubmit:F,children:e.jsxs(s,{container:!0,spacing:3,children:[e.jsx(s,{item:!0,xs:12,children:e.jsx(R,{fullWidth:!0,label:"Paper Title *",value:c.title,onChange:o=>p("title",o.target.value),error:!!u.title,helperText:u.title,required:!0})}),e.jsx(s,{item:!0,xs:12,children:e.jsx(R,{fullWidth:!0,multiline:!0,rows:8,label:"Abstract *",value:c.abstract,onChange:o=>p("abstract",o.target.value),error:!!u.abstract,helperText:u.abstract,required:!0})}),e.jsx(s,{item:!0,xs:12,md:4,children:e.jsxs(a,{sx:{border:"2px dashed #e0e0e0",borderRadius:2,p:2,textAlign:"center",backgroundColor:"#fafafa"},children:[e.jsx(r,{variant:"subtitle2",sx:{mb:1,fontWeight:600},children:"Update Full Paper"}),e.jsxs(n,{component:"label",variant:"contained",startIcon:e.jsx(_,{}),size:"small",sx:{backgroundColor:"#006838","&:hover":{backgroundColor:"#004d28"},textTransform:"none"},children:["Choose File",e.jsx(S,{type:"file",accept:".pdf,.doc,.docx",onChange:o=>p("full_paper_file",o.target.files[0])})]}),c.full_paper_file&&e.jsxs(r,{variant:"caption",display:"block",sx:{mt:1,color:"#006838"},children:["✓ ",c.full_paper_file.name]})]})}),e.jsx(s,{item:!0,xs:12,md:4,children:e.jsxs(a,{sx:{border:"2px dashed #e0e0e0",borderRadius:2,p:2,textAlign:"center",backgroundColor:"#fafafa"},children:[e.jsx(r,{variant:"subtitle2",sx:{mb:1,fontWeight:600},children:"Update Layouting File"}),e.jsxs(n,{component:"label",variant:"outlined",startIcon:e.jsx(_,{}),size:"small",sx:{color:"#006838",borderColor:"#006838",textTransform:"none"},children:["Choose File",e.jsx(S,{type:"file",accept:".pdf,.doc,.docx",onChange:o=>p("layouting_file",o.target.files[0])})]}),c.layouting_file&&e.jsxs(r,{variant:"caption",display:"block",sx:{mt:1,color:"#006838"},children:["✓ ",c.layouting_file.name]})]})}),e.jsx(s,{item:!0,xs:12,md:4,children:e.jsxs(a,{sx:{border:"2px dashed #e0e0e0",borderRadius:2,p:2,textAlign:"center",backgroundColor:"#fafafa"},children:[e.jsx(r,{variant:"subtitle2",sx:{mb:1,fontWeight:600},children:"Update Editor Feedback"}),e.jsxs(n,{component:"label",variant:"outlined",startIcon:e.jsx(_,{}),size:"small",sx:{color:"#006838",borderColor:"#006838",textTransform:"none"},children:["Choose File",e.jsx(S,{type:"file",accept:".pdf,.doc,.docx",onChange:o=>p("editor_feedback_file",o.target.files[0])})]}),c.editor_feedback_file&&e.jsxs(r,{variant:"caption",display:"block",sx:{mt:1,color:"#006838"},children:["✓ ",c.editor_feedback_file.name]})]})}),e.jsx(s,{item:!0,xs:12,children:e.jsxs(a,{sx:{display:"flex",gap:2,justifyContent:"flex-end"},children:[e.jsx(n,{variant:"outlined",onClick:()=>g(!1),disabled:m,sx:{textTransform:"none"},children:"Cancel"}),e.jsx(n,{type:"submit",variant:"contained",disabled:m,sx:{backgroundColor:"#006838","&:hover":{backgroundColor:"#004d28"},textTransform:"none"},children:m?"Saving...":"Save Changes"})]})})]})})]}):e.jsxs(d,{spacing:{xs:3,md:4},children:[e.jsx(x,{variant:"outlined",sx:{borderRadius:2,border:"1px solid #e0e0e0"},children:e.jsxs(h,{sx:{p:{xs:2,md:3}},children:[e.jsx(r,{variant:"h6",sx:{fontWeight:600,color:"#006838",mb:2,fontSize:{xs:"1rem",md:"1.25rem"}},children:"Submission Information"}),e.jsxs(d,{spacing:{xs:2,md:2.5},children:[e.jsxs(a,{children:[e.jsx(r,{variant:"caption",color:"text.secondary",sx:{fontWeight:600,textTransform:"uppercase",display:"block",mb:1},children:"Status"}),e.jsx(v,{label:t.status||"Pending",color:D(t.status),sx:{fontWeight:600}})]}),e.jsxs(a,{children:[e.jsx(r,{variant:"caption",color:"text.secondary",sx:{fontWeight:600,textTransform:"uppercase",display:"block",mb:1},children:"Submission Code"}),e.jsx(r,{variant:"body1",sx:{fontWeight:600,color:"#006838",fontFamily:"monospace",fontSize:"1.1rem"},children:t.submission_code||"N/A"})]}),e.jsxs(a,{children:[e.jsx(r,{variant:"caption",color:"text.secondary",sx:{fontWeight:600,textTransform:"uppercase",display:"block",mb:1},children:"Submitted On"}),e.jsx(r,{variant:"body1",children:new Date(t.created_at).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:"Asia/Jakarta"}).replace(",","")})]}),t.category&&e.jsxs(a,{children:[e.jsx(r,{variant:"caption",color:"text.secondary",sx:{fontWeight:600,textTransform:"uppercase",display:"block",mb:1},children:"Category"}),e.jsx(v,{label:t.category,sx:{backgroundColor:"#e3f2fd",color:"#1565c0",fontWeight:600}})]}),t.category_submission&&e.jsxs(a,{children:[e.jsx(r,{variant:"caption",color:"text.secondary",sx:{fontWeight:600,textTransform:"uppercase",display:"block",mb:1},children:"Presentation Type"}),e.jsx(r,{variant:"body1",children:t.category_submission})]})]})]})}),e.jsx(x,{variant:"outlined",sx:{borderRadius:2,border:"1px solid #e0e0e0"},children:e.jsxs(h,{sx:{p:{xs:2,md:3}},children:[e.jsx(r,{variant:"h6",sx:{fontWeight:600,color:"#006838",mb:2,fontSize:{xs:"1rem",md:"1.25rem"}},children:"Author Information"}),e.jsxs(d,{spacing:{xs:2,md:2.5},children:[e.jsxs(a,{children:[e.jsx(r,{variant:"caption",color:"text.secondary",sx:{fontWeight:600,textTransform:"uppercase",display:"block",mb:1},children:"Author Full Name"}),e.jsx(r,{variant:"body1",sx:{fontWeight:600},children:t.author_full_name||t.author})]}),t.institute_organization&&e.jsxs(a,{children:[e.jsx(r,{variant:"caption",color:"text.secondary",sx:{fontWeight:600,textTransform:"uppercase",display:"block",mb:1},children:"Institute / Organization"}),e.jsx(r,{variant:"body1",children:t.institute_organization})]}),t.corresponding_author_email&&e.jsxs(a,{children:[e.jsx(r,{variant:"caption",color:"text.secondary",sx:{fontWeight:600,textTransform:"uppercase",display:"block",mb:1},children:"Corresponding Author Email"}),e.jsx(r,{variant:"body1",children:t.corresponding_author_email})]}),t.mobile_number&&e.jsxs(a,{children:[e.jsx(r,{variant:"caption",color:"text.secondary",sx:{fontWeight:600,textTransform:"uppercase",display:"block",mb:1},children:"Mobile Number (WhatsApp)"}),e.jsx(r,{variant:"body1",children:t.mobile_number})]})]})]})}),(t.co_author_1||t.co_author_2||t.co_author_3||t.co_author_4||t.co_author_5)&&e.jsx(x,{variant:"outlined",sx:{borderRadius:2,border:"1px solid #e0e0e0"},children:e.jsxs(h,{sx:{p:{xs:2,md:3}},children:[e.jsx(r,{variant:"h6",sx:{fontWeight:600,color:"#006838",mb:2,fontSize:{xs:"1rem",md:"1.25rem"}},children:"Co-Authors"}),e.jsx(d,{spacing:2,children:[1,2,3,4,5].map(o=>{const i=t[`co_author_${o}`],j=t[`co_author_${o}_institute`];return i?e.jsx(a,{sx:{p:2,backgroundColor:"#f9fafb",borderRadius:2,border:"1px solid #e5e7eb"},children:e.jsxs(a,{sx:{display:"flex",alignItems:"start",gap:1.5},children:[e.jsx(A,{sx:{color:"#006838",fontSize:20,mt:.5}}),e.jsxs(a,{sx:{flex:1},children:[e.jsxs(r,{variant:"subtitle2",sx:{fontWeight:600,color:"#374151",mb:.5},children:["Co-Author ",o]}),e.jsx(r,{variant:"body1",sx:{fontWeight:600,color:"#1a1a1a",mb:.5},children:i}),j&&e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:.5},children:[e.jsx(O,{sx:{color:"#6c757d",fontSize:16}}),e.jsx(r,{variant:"body2",color:"text.secondary",children:j})]})]})]})},o):null})})]})}),e.jsx(x,{variant:"outlined",sx:{borderRadius:2,border:"1px solid #e0e0e0"},children:e.jsxs(h,{sx:{p:{xs:2,md:3}},children:[e.jsx(r,{variant:"h6",sx:{fontWeight:600,color:"#006838",mb:2,fontSize:{xs:"1rem",md:"1.25rem"}},children:"Paper Details"}),e.jsxs(d,{spacing:{xs:2,md:2.5},children:[e.jsxs(a,{children:[e.jsx(r,{variant:"caption",color:"text.secondary",sx:{fontWeight:600,textTransform:"uppercase",display:"block",mb:1},children:"Paper Title"}),e.jsx(r,{variant:"h6",sx:{fontWeight:700,color:"#1a1a1a",lineHeight:1.4},children:t.title})]}),e.jsxs(a,{children:[e.jsx(r,{variant:"caption",color:"text.secondary",sx:{fontWeight:600,textTransform:"uppercase",display:"block",mb:1},children:"Sub Theme"}),e.jsx(r,{variant:"body1",sx:{color:"#006838",fontWeight:500},children:t.paper_sub_theme||t.topic})]}),e.jsxs(a,{children:[e.jsx(r,{variant:"caption",color:"text.secondary",sx:{fontWeight:600,textTransform:"uppercase",display:"block",mb:1},children:"Abstract"}),e.jsx(r,{variant:"body1",sx:{whiteSpace:"pre-wrap",lineHeight:1.7,maxWidth:"100%",color:"#2c2c2c",textAlign:"justify"},children:t.abstract})]}),t.keywords&&e.jsxs(a,{children:[e.jsx(r,{variant:"caption",color:"text.secondary",sx:{fontWeight:600,textTransform:"uppercase",display:"block",mb:1},children:"Keywords"}),e.jsx(a,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:t.keywords.split(",").map((o,i)=>e.jsx(v,{label:o.trim(),size:"small",sx:{backgroundColor:"#e8f5e9",color:"#2e7d32",fontWeight:500}},i))})]})]})]})}),e.jsx(x,{variant:"outlined",sx:{borderRadius:2,border:"1px solid #e0e0e0"},children:e.jsxs(h,{sx:{p:{xs:2,md:3}},children:[e.jsx(r,{variant:"h6",sx:{fontWeight:600,color:"#006838",mb:2,fontSize:{xs:"1rem",md:"1.25rem"}},children:"Uploaded Files"}),e.jsxs(d,{spacing:1.5,children:[t.full_paper_file&&e.jsx(n,{variant:"outlined",startIcon:e.jsx(k,{}),endIcon:e.jsx(C,{}),component:"a",href:`/storage/${t.full_paper_file}`,target:"_blank",rel:"noopener noreferrer",fullWidth:!0,sx:{justifyContent:"space-between",textTransform:"none",color:"#006838",borderColor:"#006838",py:1.5,"&:hover":{borderColor:"#004d28",backgroundColor:"rgba(0, 104, 56, 0.04)"}},children:"Full Paper"}),t.layouting_file&&e.jsx(n,{variant:"outlined",startIcon:e.jsx(k,{}),endIcon:e.jsx(C,{}),component:"a",href:`/storage/${t.layouting_file}`,target:"_blank",rel:"noopener noreferrer",fullWidth:!0,sx:{justifyContent:"space-between",textTransform:"none",color:"#006838",borderColor:"#006838",py:1.5,"&:hover":{borderColor:"#004d28",backgroundColor:"rgba(0, 104, 56, 0.04)"}},children:"Layouting File"}),t.editor_feedback_file&&e.jsx(n,{variant:"outlined",startIcon:e.jsx(k,{}),endIcon:e.jsx(C,{}),component:"a",href:`/storage/${t.editor_feedback_file}`,target:"_blank",rel:"noopener noreferrer",fullWidth:!0,sx:{justifyContent:"space-between",textTransform:"none",color:"#006838",borderColor:"#006838",py:1.5,"&:hover":{borderColor:"#004d28",backgroundColor:"rgba(0, 104, 56, 0.04)"}},children:"Editor Feedback"}),!t.full_paper_file&&!t.layouting_file&&!t.editor_feedback_file&&e.jsx(r,{variant:"body2",color:"text.secondary",sx:{fontStyle:"italic",textAlign:"center",py:2},children:"No files uploaded"})]})]})}),l.length>0&&e.jsx(x,{variant:"outlined",sx:{borderRadius:2,border:"1px solid #e0e0e0",backgroundColor:"#fafbfc"},children:e.jsxs(h,{sx:{p:{xs:2,md:3}},children:[e.jsxs(r,{variant:"h6",sx:{fontWeight:600,color:"#006838",mb:3,fontSize:{xs:"1rem",md:"1.25rem"},display:"flex",alignItems:"center",gap:1},children:[e.jsx(w,{}),"Admin Comments & Feedback"]}),l.some(o=>o.overall_score)&&e.jsxs(a,{sx:{mb:3,p:2.5,background:"linear-gradient(135deg, #006838 0%, #00854a 100%)",borderRadius:2,boxShadow:"0 4px 12px rgba(0, 104, 56, 0.15)",textAlign:"center"},children:[e.jsx(r,{variant:"caption",sx:{color:"rgba(255,255,255,0.9)",fontWeight:600,textTransform:"uppercase",letterSpacing:.5,display:"block",mb:1},children:"Final Average Score"}),e.jsx(r,{variant:"h3",sx:{color:"#fff",fontWeight:700,mb:.5},children:(l.reduce((o,i)=>o+parseInt(i.overall_score||0,10),0)/l.filter(o=>o.overall_score).length).toFixed(1)}),e.jsxs(r,{variant:"body2",sx:{color:"rgba(255,255,255,0.85)"},children:["Based on ",l.filter(o=>o.overall_score).length," reviewer",l.filter(o=>o.overall_score).length!==1?"s":""]})]}),e.jsx(s,{container:!0,spacing:2.5,children:l.map((o,i)=>{const b=(y=>{if(!y)return{bg:"#e0e0e0",text:"#666"};const f=y.toLowerCase();return f.includes("accept")?{bg:"#d4edda",text:"#155724",label:"Accepted"}:f.includes("reject")?{bg:"#f8d7da",text:"#721c24",label:"Rejected"}:f.includes("revision")?{bg:"#fff3cd",text:"#856404",label:"Revision Required"}:f.includes("minor")?{bg:"#cfe2ff",text:"#084298",label:"Minor Revision"}:f.includes("major")?{bg:"#fff3cd",text:"#664d03",label:"Major Revision"}:{bg:"#e7f3ff",text:"#0c5cb5",label:y}})(o.recommendation);return e.jsx(s,{item:!0,xs:12,md:6,children:e.jsxs(a,{sx:{position:"relative",p:2.5,backgroundColor:"#ffffff",borderRadius:2,border:"2px solid #e8eaed",boxShadow:"0 1px 3px rgba(0,0,0,0.08)",transition:"all 0.2s ease",height:"100%",display:"flex",flexDirection:"column","&:hover":{boxShadow:"0 4px 12px rgba(0,0,0,0.12)",transform:"translateY(-2px)",borderColor:"#006838"}},children:[o.recommendation&&e.jsx(a,{sx:{position:"absolute",top:12,right:12,px:1.5,py:.5,backgroundColor:b.bg,borderRadius:1,border:`1px solid ${b.text}40`},children:e.jsx(r,{variant:"caption",sx:{color:b.text,fontWeight:700,fontSize:"0.65rem",textTransform:"uppercase",letterSpacing:.3},children:b.label})}),e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:1.5,mb:2,pr:10},children:[e.jsx(a,{sx:{width:40,height:40,borderRadius:"50%",backgroundColor:"#006838",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(A,{sx:{color:"#fff",fontSize:22}})}),e.jsxs(a,{sx:{flex:1,minWidth:0},children:[e.jsx(r,{variant:"subtitle1",sx:{fontWeight:700,color:"#1a1a1a",lineHeight:1.3,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:o.reviewer?.name||"Admin"}),e.jsxs(r,{variant:"caption",sx:{color:"#9ca3af",fontSize:"0.75rem",display:"block"},children:["Reviewer #",i+1]})]})]}),o.overall_score&&e.jsx(a,{sx:{mb:2,p:1.5,backgroundColor:o.overall_score>=70?"#f0fdf4":"#fef3c7",borderRadius:1.5,border:`1px solid ${o.overall_score>=70?"#86efac":"#fde047"}`,textAlign:"center"},children:e.jsxs(r,{variant:"h5",sx:{fontWeight:800,color:o.overall_score>=70?"#15803d":"#ca8a04",letterSpacing:-.5},children:["Score: ",o.overall_score]})}),e.jsx(a,{sx:{mb:2,flex:1},children:e.jsx(r,{variant:"body2",sx:{color:"#374151",lineHeight:1.7,whiteSpace:"pre-wrap",fontFamily:'"Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',fontSize:"0.9rem"},children:o.comments||o.feedback||"No feedback provided"})}),e.jsx(a,{sx:{pt:2,borderTop:"1px solid #e5e7eb",display:"flex",alignItems:"center",gap:.5},children:e.jsxs(r,{variant:"caption",sx:{color:"#9ca3af",fontSize:"0.75rem",fontStyle:"italic"},children:["Reviewed on ",new Date(o.created_at).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})]})})]})},o.id||i)})})]})})]})]})]})}export{X as default};
