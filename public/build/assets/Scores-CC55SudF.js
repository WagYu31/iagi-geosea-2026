import{n as Y,r as z,j as e,y as a,T as l,K as w,L as _,O as M,R as K,C as Q,D as X,a6 as B,a7 as N,a8 as F,M as g,W as Z,X as G,Y as J,Z as I,$ as x,a0 as V,Q as A}from"./vendor-mui-core-BkCyxMSn.js";import{H as ee}from"./vendor-inertia-ewhD8odP.js";import{S as re}from"./layouts-COuE5Lis.js";import{A as te,p as oe,q as se,u as le,$ as ae}from"./vendor-mui-icons-Cgc1f_ud.js";import"./vendor-react-zq6P3Ky3.js";function he({submissions:b=[]}){const C=Y(),t=C.palette.custom,o=C.palette.mode==="dark",[j,L]=z.useState(""),[v,P]=z.useState("highest"),[S,H]=z.useState("all"),y=r=>{if(!r||r.length===0)return"N/A";const c=r.filter(s=>s.overall_score);return c.length===0?"N/A":(c.reduce((s,h)=>{const d=(parseInt(h.originality_score||0)+parseInt(h.relevance_score||0)+parseInt(h.clarity_score||0)+parseInt(h.methodology_score||0)+parseInt(h.overall_score||0))/5;return s+d},0)/c.length).toFixed(1)},$=r=>({accepted:{bg:o?"rgba(22,163,74,0.15)":"#dcfce7",color:"#16a34a"},rejected:{bg:o?"rgba(239,68,68,0.15)":"#fee2e2",color:"#dc2626"},under_review:{bg:o?"rgba(37,99,235,0.15)":"#dbeafe",color:"#2563eb"},"under review":{bg:o?"rgba(37,99,235,0.15)":"#dbeafe",color:"#2563eb"},revision_required_phase1:{bg:o?"rgba(245,158,11,0.15)":"#fef3c7",color:"#d97706"},revision_required_phase2:{bg:o?"rgba(245,158,11,0.15)":"#fef3c7",color:"#d97706"}})[r?.toLowerCase()]||{bg:o?"rgba(107,114,128,0.15)":"#f3f4f6",color:"#6b7280"};let f=b.filter(r=>r.title?.toLowerCase().includes(j.toLowerCase())||r.user?.name?.toLowerCase().includes(j.toLowerCase()));v!=="none"&&(f=[...f].sort((r,c)=>{const n=y(r.reviews),s=y(c.reviews);return n==="N/A"&&s==="N/A"?0:n==="N/A"?1:s==="N/A"?-1:v==="highest"?parseFloat(s)-parseFloat(n):parseFloat(n)-parseFloat(s)}));const k=f.length;S!=="all"&&(f=f.slice(0,parseInt(S)));const W=b.filter(r=>r.reviews?.some(c=>c.overall_score)).length,O=b.length-W,i={borderBottom:`1px solid ${t.cardBorder}`,py:1.5,fontSize:"0.825rem",color:t.textPrimary},D={...i,fontWeight:700,fontSize:"0.75rem",textTransform:"uppercase",letterSpacing:"0.05em",color:t.textMuted,bgcolor:o?"rgba(0,0,0,0.15)":"#f9fafb"},m={"& .MuiOutlinedInput-root":{borderRadius:"10px","& fieldset":{borderColor:t.cardBorder},"&:hover fieldset":{borderColor:"#1abc9c"},"&.Mui-focused fieldset":{borderColor:"#1abc9c"}}},q=[{label:"Total Submissions",value:b.length,icon:e.jsx(te,{}),color:"#1abc9c",bg:o?"rgba(26,188,156,0.12)":"#ecfdf5"},{label:"With Scores",value:W,icon:e.jsx(oe,{}),color:"#2563eb",bg:o?"rgba(37,99,235,0.12)":"#dbeafe"},{label:"Pending Review",value:O,icon:e.jsx(se,{}),color:"#d97706",bg:o?"rgba(245,158,11,0.12)":"#fef3c7"}];return e.jsxs(re,{children:[e.jsx(ee,{title:"Scores"}),e.jsxs(a,{sx:{p:{xs:2,sm:3,md:3.5},minHeight:"100vh",bgcolor:t.surfaceBg},children:[e.jsxs(a,{sx:{mb:3},children:[e.jsx(l,{variant:"h4",sx:{fontWeight:800,color:t.textPrimary,fontSize:{xs:"1.5rem",sm:"1.85rem"},letterSpacing:"-0.02em"},children:"Scores & Rankings ðŸ“Š"}),e.jsxs(l,{variant:"body2",sx:{color:t.textMuted,mt:.5},children:[b.length," submissions tracked"]})]}),e.jsx(a,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"1fr 1fr 1fr"},gap:2,mb:3},children:q.map(r=>e.jsx(w,{elevation:0,sx:{borderRadius:"14px",border:`1px solid ${t.cardBorder}`,bgcolor:t.cardBg,transition:"all 0.25s","&:hover":{transform:"translateY(-2px)",boxShadow:`0 8px 25px ${o?"rgba(0,0,0,0.3)":"rgba(0,0,0,0.08)"}`}},children:e.jsx(_,{sx:{p:2.5,"&:last-child":{pb:2.5}},children:e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(M,{variant:"rounded",sx:{bgcolor:r.bg,width:44,height:44,borderRadius:"12px"},children:K.cloneElement(r.icon,{sx:{color:r.color,fontSize:22}})}),e.jsxs(a,{children:[e.jsx(l,{variant:"caption",sx:{color:t.textMuted,fontWeight:600,textTransform:"uppercase",letterSpacing:"0.05em",fontSize:"0.7rem"},children:r.label}),e.jsx(l,{sx:{fontWeight:700,fontSize:"1.25rem",color:t.textPrimary,lineHeight:1.2},children:r.value})]})]})})},r.label))}),e.jsx(w,{elevation:0,sx:{borderRadius:"14px",border:`1px solid ${t.cardBorder}`,bgcolor:t.cardBg,mb:2.5},children:e.jsx(_,{sx:{p:2,"&:last-child":{pb:2}},children:e.jsxs(a,{sx:{display:"flex",gap:2,flexWrap:"wrap"},children:[e.jsx(Q,{fullWidth:!0,placeholder:"Search by title or author...",value:j,onChange:r=>L(r.target.value),size:"small",InputProps:{startAdornment:e.jsx(X,{position:"start",children:e.jsx(le,{sx:{color:t.textMuted,fontSize:20}})})},sx:{flex:1,minWidth:250,...m,"& .MuiOutlinedInput-root":{...m["& .MuiOutlinedInput-root"],bgcolor:o?"rgba(0,0,0,0.15)":"#f9fafb"},"& input":{color:t.textPrimary,fontSize:"0.85rem"}}}),e.jsxs(B,{size:"small",sx:{minWidth:180,...m},children:[e.jsx(N,{sx:{color:t.textMuted},children:"Sort by Score"}),e.jsxs(F,{value:v,label:"Sort by Score",onChange:r=>P(r.target.value),sx:{bgcolor:o?"rgba(0,0,0,0.15)":"#f9fafb",color:t.textPrimary,fontSize:"0.85rem"},children:[e.jsx(g,{value:"highest",children:"Highest â†’ Lowest"}),e.jsx(g,{value:"lowest",children:"Lowest â†’ Highest"}),e.jsx(g,{value:"none",children:"No Sorting"})]})]}),e.jsxs(B,{size:"small",sx:{minWidth:140,...m},children:[e.jsx(N,{sx:{color:t.textMuted},children:"Show Top"}),e.jsxs(F,{value:S,label:"Show Top",onChange:r=>H(r.target.value),sx:{bgcolor:o?"rgba(0,0,0,0.15)":"#f9fafb",color:t.textPrimary,fontSize:"0.85rem"},children:[e.jsxs(g,{value:"all",children:["All (",k,")"]}),e.jsx(g,{value:"50",children:"Top 50"}),e.jsx(g,{value:"20",children:"Top 20"}),e.jsx(g,{value:"10",children:"Top 10"}),e.jsx(g,{value:"3",children:"Top 3"})]})]})]})})}),e.jsx(w,{elevation:0,sx:{borderRadius:"16px",border:`1px solid ${t.cardBorder}`,bgcolor:t.cardBg,overflow:"hidden"},children:e.jsx(Z,{children:e.jsxs(G,{size:"small",children:[e.jsx(J,{children:e.jsx(I,{children:["#","Title","Author","Status","Reviewers","Avg Score","Detail"].map(r=>e.jsx(x,{sx:D,align:r==="Avg Score"?"center":"left",children:r},r))})}),e.jsx(V,{children:f.length===0?e.jsx(I,{children:e.jsx(x,{colSpan:7,align:"center",sx:i,children:e.jsxs(a,{sx:{py:5},children:[e.jsx(ae,{sx:{fontSize:48,color:o?"#374151":"#d1d5db",mb:1}}),e.jsx(l,{variant:"body2",sx:{color:t.textMuted},children:"No submissions found"})]})})}):f.map((r,c)=>{const n=y(r.reviews),s=r.reviews?.filter(p=>p.overall_score)||[],h=$(r.status),d=n!=="N/A"?parseFloat(n):null,E=d!==null?d>=4?o?"rgba(22,163,74,0.15)":"#dcfce7":d>=3?o?"rgba(245,158,11,0.15)":"#fef3c7":o?"rgba(239,68,68,0.15)":"#fee2e2":"transparent",U=d!==null?d>=4?"#16a34a":d>=3?"#d97706":"#dc2626":t.textMuted;return e.jsxs(I,{hover:!0,sx:{"&:hover":{bgcolor:o?"rgba(255,255,255,0.02)":"#f9fafb"}},children:[e.jsxs(x,{sx:{...i,fontWeight:600,color:t.textMuted,fontSize:"0.8rem"},children:["#",r.id]}),e.jsx(x,{sx:{...i,maxWidth:250},children:e.jsx(l,{variant:"body2",noWrap:!0,sx:{fontWeight:600,fontSize:"0.825rem",maxWidth:250},children:r.title})}),e.jsx(x,{sx:i,children:e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:1.5},children:[e.jsx(M,{sx:{width:30,height:30,bgcolor:"#1abc9c",fontSize:"0.75rem",fontWeight:700},children:(r.user?.name||"U").charAt(0)}),e.jsx(l,{variant:"body2",sx:{fontSize:"0.825rem",color:t.textPrimary},children:r.user?.name||"Unknown"})]})}),e.jsx(x,{sx:i,children:e.jsx(A,{label:r.status,size:"small",sx:{bgcolor:h.bg,color:h.color,fontWeight:600,fontSize:"0.7rem",borderRadius:"6px",height:24}})}),e.jsxs(x,{sx:i,children:[e.jsxs(l,{variant:"body2",sx:{fontWeight:600,fontSize:"0.825rem"},children:[r.reviews?.length||0," assigned"]}),e.jsxs(l,{variant:"caption",sx:{color:t.textMuted,fontSize:"0.7rem"},children:[s.length," completed"]})]}),e.jsx(x,{align:"center",sx:i,children:d!==null?e.jsx(a,{sx:{display:"inline-flex",alignItems:"center",bgcolor:E,color:U,px:2,py:.75,borderRadius:"8px",minWidth:55},children:e.jsx(l,{sx:{fontWeight:700,fontSize:"1rem",lineHeight:1},children:n})}):e.jsx(A,{label:"N/A",size:"small",sx:{bgcolor:o?"rgba(107,114,128,0.15)":"#f3f4f6",color:"#6b7280",fontWeight:600,fontSize:"0.7rem",borderRadius:"6px",height:24}})}),e.jsx(x,{sx:i,children:s.length>0?e.jsx(a,{sx:{display:"flex",flexDirection:"column",gap:.5},children:s.map((p,T)=>{const R=((parseInt(p.originality_score||0)+parseInt(p.relevance_score||0)+parseInt(p.clarity_score||0)+parseInt(p.methodology_score||0)+parseInt(p.overall_score||0))/5).toFixed(1),u=parseFloat(R);return e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsxs(l,{variant:"caption",sx:{fontWeight:600,minWidth:70,color:t.textMuted,fontSize:"0.7rem"},children:["Reviewer ",T+1,":"]}),e.jsx(A,{label:R,size:"small",sx:{bgcolor:u>=4?o?"rgba(22,163,74,0.15)":"#dcfce7":u>=3?o?"rgba(245,158,11,0.15)":"#fef3c7":o?"rgba(239,68,68,0.15)":"#fee2e2",color:u>=4?"#16a34a":u>=3?"#d97706":"#dc2626",fontWeight:600,fontSize:"0.7rem",borderRadius:"6px",height:22}})]},T)})}):e.jsx(l,{variant:"caption",sx:{fontStyle:"italic",color:t.textMuted,fontSize:"0.75rem"},children:"No scores yet"})})]},r.id)})})]})})})]})]})}export{he as default};
