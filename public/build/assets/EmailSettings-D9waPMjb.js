import{n as k,r as n,j as e,y as m,T as c,K as T,L as C,O as E,A as f,J as l,C as o,M,B as P,ap as G}from"./vendor-mui-core-BkCyxMSn.js";import{H as z,r as F}from"./vendor-inertia-ewhD8odP.js";import{S as H}from"./layouts-CmbhkawX.js";import{Z as L,_ as D,S as I}from"./vendor-mui-icons-Dh1wiQLE.js";import"./vendor-react-zq6P3Ky3.js";function q(){const b=k(),r=b.palette.custom,j=b.palette.mode==="dark",[u,d]=n.useState(!1),[w,x]=n.useState(!1),[S,_]=n.useState(""),[h,R]=n.useState(""),[p,g]=n.useState(""),[a,v]=n.useState({mail_host:"",mail_port:587,mail_username:"",mail_password:"",mail_encryption:"tls",mail_from_address:"",mail_from_name:"IAGI-GEOSEA 2026"});n.useEffect(()=>{fetch(route("admin.email.settings")).then(s=>s.json()).then(s=>{s.id&&v({mail_host:s.mail_host||"",mail_port:s.mail_port||587,mail_username:s.mail_username||"",mail_password:s.mail_password||"",mail_encryption:s.mail_encryption||"tls",mail_from_address:s.mail_from_address||"",mail_from_name:s.mail_from_name||"IAGI-GEOSEA 2026"})})},[]);const i=(s,B)=>v(O=>({...O,[s]:B})),W=()=>{d(!0),_(""),F.post(route("admin.email.save"),a,{preserveScroll:!0,onSuccess:()=>{x(!0),d(!1)},onError:s=>{_(Object.values(s).join(", ")),d(!1)}})},A=()=>{if(!h){g("Please enter a test email address");return}d(!0),fetch(route("admin.email.test"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:JSON.stringify({test_email:h})}).then(s=>s.json()).then(s=>{g(s.message),d(!1)}).catch(s=>{g("Error: "+s.message),d(!1)})},t={"& .MuiOutlinedInput-root":{borderRadius:"10px","& fieldset":{borderColor:r.cardBorder},"&:hover fieldset":{borderColor:"#1abc9c"},"&.Mui-focused fieldset":{borderColor:"#1abc9c"}},"& .MuiInputLabel-root.Mui-focused":{color:"#1abc9c"},"& input":{color:r.textPrimary},"& .MuiFormHelperText-root":{color:r.textMuted}},y={background:"linear-gradient(135deg, #0d7a6a 0%, #1abc9c 100%)","&:hover":{background:"linear-gradient(135deg, #16a085 0%, #0d7a6a 100%)"},borderRadius:"10px",textTransform:"none",fontWeight:600,px:3,boxShadow:"0 4px 14px rgba(26,188,156,0.35)"};return e.jsxs(H,{children:[e.jsx(z,{title:"SMTP Email Settings"}),e.jsxs(m,{sx:{p:{xs:2,sm:3,md:3.5},minHeight:"100vh",bgcolor:r.surfaceBg},children:[e.jsxs(m,{sx:{mb:3},children:[e.jsx(c,{variant:"h4",sx:{fontWeight:800,color:r.textPrimary,fontSize:{xs:"1.5rem",sm:"1.85rem"},letterSpacing:"-0.02em"},children:"Email Settings ✉️"}),e.jsx(c,{variant:"body2",sx:{color:r.textMuted,mt:.5},children:"Configure SMTP server for outgoing emails"})]}),e.jsx(T,{elevation:0,sx:{borderRadius:"16px",border:`1px solid ${r.cardBorder}`,bgcolor:r.cardBg,mb:3},children:e.jsxs(C,{sx:{p:3},children:[e.jsxs(m,{sx:{display:"flex",alignItems:"center",gap:1.5,mb:3},children:[e.jsx(E,{variant:"rounded",sx:{bgcolor:j?"rgba(26,188,156,0.12)":"#ecfdf5",width:40,height:40,borderRadius:"10px"},children:e.jsx(L,{sx:{color:"#1abc9c",fontSize:22}})}),e.jsx(c,{sx:{fontWeight:700,fontSize:"1rem",color:r.textPrimary},children:"Mail Server Configuration"})]}),S&&e.jsx(f,{severity:"error",sx:{mb:2,borderRadius:"10px"},children:S}),e.jsxs(l,{container:!0,spacing:2,children:[e.jsx(l,{item:!0,xs:12,md:6,children:e.jsx(o,{fullWidth:!0,label:"SMTP Host",value:a.mail_host,onChange:s=>i("mail_host",s.target.value),placeholder:"smtp.gmail.com",helperText:"SMTP server address",sx:t})}),e.jsx(l,{item:!0,xs:12,md:3,children:e.jsx(o,{fullWidth:!0,type:"number",label:"SMTP Port",value:a.mail_port,onChange:s=>i("mail_port",s.target.value),helperText:"Usually 587 or 465",sx:t})}),e.jsx(l,{item:!0,xs:12,md:3,children:e.jsxs(o,{fullWidth:!0,select:!0,label:"Encryption",value:a.mail_encryption,onChange:s=>i("mail_encryption",s.target.value),sx:t,children:[e.jsx(M,{value:"tls",children:"TLS"}),e.jsx(M,{value:"ssl",children:"SSL"})]})}),e.jsx(l,{item:!0,xs:12,md:6,children:e.jsx(o,{fullWidth:!0,label:"Username",value:a.mail_username,onChange:s=>i("mail_username",s.target.value),placeholder:"your-email@gmail.com",helperText:"SMTP username (usually your email)",sx:t})}),e.jsx(l,{item:!0,xs:12,md:6,children:e.jsx(o,{fullWidth:!0,type:"password",label:"Password",value:a.mail_password,onChange:s=>i("mail_password",s.target.value),placeholder:"Your SMTP password or app password",helperText:"For Gmail, use App Password",sx:t})}),e.jsx(l,{item:!0,xs:12,md:6,children:e.jsx(o,{fullWidth:!0,type:"email",label:"From Email Address",value:a.mail_from_address,onChange:s=>i("mail_from_address",s.target.value),placeholder:"noreply@iagi-geosea.com",helperText:"Email address that appears as sender",sx:t})}),e.jsx(l,{item:!0,xs:12,md:6,children:e.jsx(o,{fullWidth:!0,label:"From Name",value:a.mail_from_name,onChange:s=>i("mail_from_name",s.target.value),placeholder:"IAGI-GEOSEA 2026",helperText:"Name that appears as sender",sx:t})})]}),e.jsx(m,{sx:{mt:3},children:e.jsx(P,{variant:"contained",startIcon:e.jsx(D,{}),onClick:W,disabled:u,sx:y,children:u?"Saving...":"Save SMTP Settings"})})]})}),e.jsx(T,{elevation:0,sx:{borderRadius:"16px",border:`1px solid ${r.cardBorder}`,bgcolor:r.cardBg},children:e.jsxs(C,{sx:{p:3},children:[e.jsxs(m,{sx:{display:"flex",alignItems:"center",gap:1.5,mb:3},children:[e.jsx(E,{variant:"rounded",sx:{bgcolor:j?"rgba(37,99,235,0.12)":"#dbeafe",width:40,height:40,borderRadius:"10px"},children:e.jsx(I,{sx:{color:"#2563eb",fontSize:22}})}),e.jsx(c,{sx:{fontWeight:700,fontSize:"1rem",color:r.textPrimary},children:"Test Email Configuration"})]}),e.jsxs(m,{sx:{display:"flex",gap:2,alignItems:"flex-start",flexWrap:"wrap"},children:[e.jsx(o,{value:h,onChange:s=>R(s.target.value),placeholder:"test@example.com",helperText:"Enter email address to send test email",size:"small",sx:{flex:1,minWidth:250,...t}}),e.jsx(P,{variant:"contained",startIcon:e.jsx(I,{}),onClick:A,disabled:u,sx:{...y,mt:.3},children:"Send Test Email"})]}),p&&e.jsx(f,{severity:p.includes("success")?"success":"error",sx:{mt:2,borderRadius:"10px"},children:p})]})})]}),e.jsx(G,{open:w,autoHideDuration:3e3,onClose:()=>x(!1),anchorOrigin:{vertical:"bottom",horizontal:"right"},children:e.jsx(f,{severity:"success",onClose:()=>x(!1),variant:"filled",sx:{borderRadius:"10px"},children:"SMTP settings saved successfully!"})})]})}export{q as default};
