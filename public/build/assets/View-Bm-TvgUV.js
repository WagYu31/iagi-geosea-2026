import{r as $,j as e,y as a,B as i,T as r,a6 as q,D as L,z as l,W as R,s as H,a9 as f,C as u,A as b,Q as v}from"./vendor-mui-core-DBd5ZEVJ.js";import{u as N,H as M,r as O}from"./vendor-inertia-DG3k1AW_.js";import{S as G}from"./layouts-CWvtt3F_.js";import{a4 as K,w as V,a5 as w,$ as _,l as A,a6 as Y,D as C,t as k}from"./vendor-mui-icons-CJ3FWITC.js";import"./vendor-react-zq6P3Ky3.js";import"./components-BPSCg1q0.js";import"./pages-profile-Drl2W6-d.js";const S=H("input")({clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:1,overflow:"hidden",position:"absolute",bottom:0,left:0,whiteSpace:"nowrap",width:1});function oe({submission:o,reviews:x=[],isReviewer:W=!1}){const[I,j]=$.useState(!1),{data:c,setData:g,post:z,processing:y,errors:m}=N({title:o.title||"",abstract:o.abstract||"",full_paper_file:null,layouting_file:null,editor_feedback_file:null}),F=t=>{t.preventDefault(),z(route("submissions.update",o.id),{forceFormData:!0,onSuccess:()=>{j(!1)}})},D=t=>{switch(t?.toLowerCase()){case"accepted":return"success";case"rejected":return"error";case"under_review":case"under review":return"info";case"revision_required_phase1":case"revision_required_phase2":case"revision phase 1":case"revision phase 2":case"revision":return"warning";default:return"default"}},T=["revision","revision phase 1","revision phase 2","revision_required_phase1","revision_required_phase2"].includes(o.status?.toLowerCase());return e.jsxs(G,{children:[e.jsx(M,{title:`Submission - ${o.title}`}),e.jsxs(a,{sx:{p:{xs:2,md:3},maxWidth:"1200px",margin:"0 auto"},children:[e.jsxs(a,{sx:{mb:3},children:[e.jsx(i,{startIcon:e.jsx(K,{}),onClick:()=>O.visit(W?route("reviewer.submissions"):route("submissions.index")),sx:{mb:2,color:"#006838",textTransform:"none"},children:"BACK TO SUBMISSIONS"}),e.jsxs(a,{sx:{display:"flex",justifyContent:"space-between",alignItems:"start",flexWrap:"wrap",gap:2},children:[e.jsx(a,{children:e.jsx(r,{variant:"h4",sx:{fontWeight:"bold",color:"#006838",mb:.5},children:"Submission Details"})}),!I&&T&&!W&&e.jsx(i,{variant:"contained",startIcon:e.jsx(V,{}),onClick:()=>j(!0),sx:{backgroundColor:"#006838","&:hover":{backgroundColor:"#004d28"},textTransform:"none"},children:"Edit & Resubmit"})]})]}),T&&x.length>0&&e.jsxs(q,{severity:"warning",sx:{mb:3},icon:e.jsx(w,{}),children:[e.jsx(r,{variant:"subtitle2",sx:{fontWeight:600,mb:.5},children:"Revision Required"}),e.jsx(r,{variant:"body2",children:"Your submission needs revision. Please review the comments below and update your paper accordingly."})]}),I?e.jsxs(L,{elevation:0,sx:{p:{xs:2,md:4},mb:3,border:"1px solid #e0e0e0",borderRadius:2},children:[e.jsx(r,{variant:"h6",gutterBottom:!0,sx:{fontWeight:600,color:"#006838",mb:3},children:"Edit Submission"}),e.jsx(a,{component:"form",onSubmit:F,children:e.jsxs(l,{container:!0,spacing:3,children:[e.jsx(l,{item:!0,xs:12,children:e.jsx(R,{fullWidth:!0,label:"Paper Title *",value:c.title,onChange:t=>g("title",t.target.value),error:!!m.title,helperText:m.title,required:!0})}),e.jsx(l,{item:!0,xs:12,children:e.jsx(R,{fullWidth:!0,multiline:!0,rows:8,label:"Abstract *",value:c.abstract,onChange:t=>g("abstract",t.target.value),error:!!m.abstract,helperText:m.abstract,required:!0})}),e.jsx(l,{item:!0,xs:12,md:4,children:e.jsxs(a,{sx:{border:"2px dashed #e0e0e0",borderRadius:2,p:2,textAlign:"center",backgroundColor:"#fafafa"},children:[e.jsx(r,{variant:"subtitle2",sx:{mb:1,fontWeight:600},children:"Update Full Paper"}),e.jsxs(i,{component:"label",variant:"contained",startIcon:e.jsx(_,{}),size:"small",sx:{backgroundColor:"#006838","&:hover":{backgroundColor:"#004d28"},textTransform:"none"},children:["Choose File",e.jsx(S,{type:"file",accept:".pdf,.doc,.docx",onChange:t=>g("full_paper_file",t.target.files[0])})]}),c.full_paper_file&&e.jsxs(r,{variant:"caption",display:"block",sx:{mt:1,color:"#006838"},children:["✓ ",c.full_paper_file.name]})]})}),e.jsx(l,{item:!0,xs:12,md:4,children:e.jsxs(a,{sx:{border:"2px dashed #e0e0e0",borderRadius:2,p:2,textAlign:"center",backgroundColor:"#fafafa"},children:[e.jsx(r,{variant:"subtitle2",sx:{mb:1,fontWeight:600},children:"Update Layouting File"}),e.jsxs(i,{component:"label",variant:"outlined",startIcon:e.jsx(_,{}),size:"small",sx:{color:"#006838",borderColor:"#006838",textTransform:"none"},children:["Choose File",e.jsx(S,{type:"file",accept:".pdf,.doc,.docx",onChange:t=>g("layouting_file",t.target.files[0])})]}),c.layouting_file&&e.jsxs(r,{variant:"caption",display:"block",sx:{mt:1,color:"#006838"},children:["✓ ",c.layouting_file.name]})]})}),e.jsx(l,{item:!0,xs:12,md:4,children:e.jsxs(a,{sx:{border:"2px dashed #e0e0e0",borderRadius:2,p:2,textAlign:"center",backgroundColor:"#fafafa"},children:[e.jsx(r,{variant:"subtitle2",sx:{mb:1,fontWeight:600},children:"Update Editor Feedback"}),e.jsxs(i,{component:"label",variant:"outlined",startIcon:e.jsx(_,{}),size:"small",sx:{color:"#006838",borderColor:"#006838",textTransform:"none"},children:["Choose File",e.jsx(S,{type:"file",accept:".pdf,.doc,.docx",onChange:t=>g("editor_feedback_file",t.target.files[0])})]}),c.editor_feedback_file&&e.jsxs(r,{variant:"caption",display:"block",sx:{mt:1,color:"#006838"},children:["✓ ",c.editor_feedback_file.name]})]})}),e.jsx(l,{item:!0,xs:12,children:e.jsxs(a,{sx:{display:"flex",gap:2,justifyContent:"flex-end"},children:[e.jsx(i,{variant:"outlined",onClick:()=>j(!1),disabled:y,sx:{textTransform:"none"},children:"Cancel"}),e.jsx(i,{type:"submit",variant:"contained",disabled:y,sx:{backgroundColor:"#006838","&:hover":{backgroundColor:"#004d28"},textTransform:"none"},children:y?"Saving...":"Save Changes"})]})})]})})]}):e.jsxs(f,{spacing:{xs:3,md:4},children:[e.jsx(u,{variant:"outlined",sx:{borderRadius:2,border:"1px solid #e0e0e0"},children:e.jsxs(b,{sx:{p:{xs:2,md:3}},children:[e.jsx(r,{variant:"h6",sx:{fontWeight:600,color:"#006838",mb:2,fontSize:{xs:"1rem",md:"1.25rem"}},children:"Submission Information"}),e.jsxs(f,{spacing:{xs:2,md:2.5},children:[e.jsxs(a,{children:[e.jsx(r,{variant:"caption",color:"text.secondary",sx:{fontWeight:600,textTransform:"uppercase",display:"block",mb:1},children:"Status"}),e.jsx(v,{label:o.status||"Pending",color:D(o.status),sx:{fontWeight:600}})]}),e.jsxs(a,{children:[e.jsx(r,{variant:"caption",color:"text.secondary",sx:{fontWeight:600,textTransform:"uppercase",display:"block",mb:1},children:"Submission Code"}),e.jsx(r,{variant:"body1",sx:{fontWeight:600,color:"#006838",fontFamily:"monospace",fontSize:"1.1rem"},children:o.submission_code||"N/A"})]}),e.jsxs(a,{children:[e.jsx(r,{variant:"caption",color:"text.secondary",sx:{fontWeight:600,textTransform:"uppercase",display:"block",mb:1},children:"Submitted On"}),e.jsx(r,{variant:"body1",children:new Date(o.created_at).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:"Asia/Jakarta"}).replace(",","")})]}),o.category&&e.jsxs(a,{children:[e.jsx(r,{variant:"caption",color:"text.secondary",sx:{fontWeight:600,textTransform:"uppercase",display:"block",mb:1},children:"Category"}),e.jsx(v,{label:o.category,sx:{backgroundColor:"#e3f2fd",color:"#1565c0",fontWeight:600}})]}),o.category_submission&&e.jsxs(a,{children:[e.jsx(r,{variant:"caption",color:"text.secondary",sx:{fontWeight:600,textTransform:"uppercase",display:"block",mb:1},children:"Presentation Type"}),e.jsx(r,{variant:"body1",children:o.category_submission})]})]})]})}),e.jsx(u,{variant:"outlined",sx:{borderRadius:2,border:"1px solid #e0e0e0"},children:e.jsxs(b,{sx:{p:{xs:2,md:3}},children:[e.jsx(r,{variant:"h6",sx:{fontWeight:600,color:"#006838",mb:2,fontSize:{xs:"1rem",md:"1.25rem"}},children:"Author Information"}),e.jsxs(f,{spacing:{xs:2,md:2.5},children:[e.jsxs(a,{children:[e.jsx(r,{variant:"caption",color:"text.secondary",sx:{fontWeight:600,textTransform:"uppercase",display:"block",mb:1},children:"Author Full Name"}),e.jsx(r,{variant:"body1",sx:{fontWeight:600},children:o.author_full_name||o.author})]}),o.institute_organization&&e.jsxs(a,{children:[e.jsx(r,{variant:"caption",color:"text.secondary",sx:{fontWeight:600,textTransform:"uppercase",display:"block",mb:1},children:"Institute / Organization"}),e.jsx(r,{variant:"body1",children:o.institute_organization})]}),o.corresponding_author_email&&e.jsxs(a,{children:[e.jsx(r,{variant:"caption",color:"text.secondary",sx:{fontWeight:600,textTransform:"uppercase",display:"block",mb:1},children:"Corresponding Author Email"}),e.jsx(r,{variant:"body1",children:o.corresponding_author_email})]}),o.mobile_number&&e.jsxs(a,{children:[e.jsx(r,{variant:"caption",color:"text.secondary",sx:{fontWeight:600,textTransform:"uppercase",display:"block",mb:1},children:"Mobile Number (WhatsApp)"}),e.jsx(r,{variant:"body1",children:o.mobile_number})]})]})]})}),(o.co_author_1||o.co_author_2||o.co_author_3||o.co_author_4||o.co_author_5)&&e.jsx(u,{variant:"outlined",sx:{borderRadius:2,border:"1px solid #e0e0e0"},children:e.jsxs(b,{sx:{p:{xs:2,md:3}},children:[e.jsx(r,{variant:"h6",sx:{fontWeight:600,color:"#006838",mb:2,fontSize:{xs:"1rem",md:"1.25rem"}},children:"Co-Authors"}),e.jsx(f,{spacing:2,children:[1,2,3,4,5].map(t=>{const d=o[`co_author_${t}`],h=o[`co_author_${t}_institute`];return d?e.jsx(a,{sx:{p:2,backgroundColor:"#f9fafb",borderRadius:2,border:"1px solid #e5e7eb"},children:e.jsxs(a,{sx:{display:"flex",alignItems:"start",gap:1.5},children:[e.jsx(A,{sx:{color:"#006838",fontSize:20,mt:.5}}),e.jsxs(a,{sx:{flex:1},children:[e.jsxs(r,{variant:"subtitle2",sx:{fontWeight:600,color:"#374151",mb:.5},children:["Co-Author ",t]}),e.jsx(r,{variant:"body1",sx:{fontWeight:600,color:"#1a1a1a",mb:.5},children:d}),h&&e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:.5},children:[e.jsx(Y,{sx:{color:"#6c757d",fontSize:16}}),e.jsx(r,{variant:"body2",color:"text.secondary",children:h})]})]})]})},t):null})})]})}),e.jsx(u,{variant:"outlined",sx:{borderRadius:2,border:"1px solid #e0e0e0"},children:e.jsxs(b,{sx:{p:{xs:2,md:3}},children:[e.jsx(r,{variant:"h6",sx:{fontWeight:600,color:"#006838",mb:2,fontSize:{xs:"1rem",md:"1.25rem"}},children:"Paper Details"}),e.jsxs(f,{spacing:{xs:2,md:2.5},children:[e.jsxs(a,{children:[e.jsx(r,{variant:"caption",color:"text.secondary",sx:{fontWeight:600,textTransform:"uppercase",display:"block",mb:1},children:"Paper Title"}),e.jsx(r,{variant:"h6",sx:{fontWeight:700,color:"#1a1a1a",lineHeight:1.4},children:o.title})]}),e.jsxs(a,{children:[e.jsx(r,{variant:"caption",color:"text.secondary",sx:{fontWeight:600,textTransform:"uppercase",display:"block",mb:1},children:"Sub Theme"}),e.jsx(r,{variant:"body1",sx:{color:"#006838",fontWeight:500},children:o.paper_sub_theme||o.topic})]}),e.jsxs(a,{children:[e.jsx(r,{variant:"caption",color:"text.secondary",sx:{fontWeight:600,textTransform:"uppercase",display:"block",mb:1},children:"Abstract"}),e.jsx(r,{variant:"body1",sx:{whiteSpace:"pre-wrap",lineHeight:1.7,maxWidth:"100%",color:"#2c2c2c",textAlign:"justify"},children:o.abstract})]}),o.keywords&&e.jsxs(a,{children:[e.jsx(r,{variant:"caption",color:"text.secondary",sx:{fontWeight:600,textTransform:"uppercase",display:"block",mb:1},children:"Keywords"}),e.jsx(a,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:o.keywords.split(",").map((t,d)=>e.jsx(v,{label:t.trim(),size:"small",sx:{backgroundColor:"#e8f5e9",color:"#2e7d32",fontWeight:500}},d))})]})]})]})}),e.jsx(u,{variant:"outlined",sx:{borderRadius:2,border:"1px solid #e0e0e0"},children:e.jsxs(b,{sx:{p:{xs:2,md:3}},children:[e.jsx(r,{variant:"h6",sx:{fontWeight:600,color:"#006838",mb:2,fontSize:{xs:"1rem",md:"1.25rem"}},children:"Uploaded Files"}),e.jsxs(f,{spacing:1.5,children:[o.full_paper_file&&e.jsx(i,{variant:"outlined",startIcon:e.jsx(k,{}),endIcon:e.jsx(C,{}),component:"a",href:`/storage/${o.full_paper_file}`,target:"_blank",rel:"noopener noreferrer",fullWidth:!0,sx:{justifyContent:"space-between",textTransform:"none",color:"#006838",borderColor:"#006838",py:1.5,"&:hover":{borderColor:"#004d28",backgroundColor:"rgba(0, 104, 56, 0.04)"}},children:"Full Paper"}),o.layouting_file&&e.jsx(i,{variant:"outlined",startIcon:e.jsx(k,{}),endIcon:e.jsx(C,{}),component:"a",href:`/storage/${o.layouting_file}`,target:"_blank",rel:"noopener noreferrer",fullWidth:!0,sx:{justifyContent:"space-between",textTransform:"none",color:"#006838",borderColor:"#006838",py:1.5,"&:hover":{borderColor:"#004d28",backgroundColor:"rgba(0, 104, 56, 0.04)"}},children:"Layouting File"}),o.editor_feedback_file&&e.jsx(i,{variant:"outlined",startIcon:e.jsx(k,{}),endIcon:e.jsx(C,{}),component:"a",href:`/storage/${o.editor_feedback_file}`,target:"_blank",rel:"noopener noreferrer",fullWidth:!0,sx:{justifyContent:"space-between",textTransform:"none",color:"#006838",borderColor:"#006838",py:1.5,"&:hover":{borderColor:"#004d28",backgroundColor:"rgba(0, 104, 56, 0.04)"}},children:"Editor Feedback"}),!o.full_paper_file&&!o.layouting_file&&!o.editor_feedback_file&&e.jsx(r,{variant:"body2",color:"text.secondary",sx:{fontStyle:"italic",textAlign:"center",py:2},children:"No files uploaded"})]})]})}),x.length>0&&e.jsx(u,{variant:"outlined",sx:{borderRadius:2,border:"1px solid #e0e0e0",backgroundColor:"#fafbfc"},children:e.jsxs(b,{sx:{p:{xs:2,md:3}},children:[e.jsxs(r,{variant:"h6",sx:{fontWeight:600,color:"#006838",mb:3,fontSize:{xs:"1rem",md:"1.25rem"},display:"flex",alignItems:"center",gap:1},children:[e.jsx(w,{}),"Admin Comments & Feedback"]}),x.some(t=>t.overall_score)&&e.jsxs(a,{sx:{mb:3,p:2.5,background:"linear-gradient(135deg, #006838 0%, #00854a 100%)",borderRadius:2,boxShadow:"0 4px 12px rgba(0, 104, 56, 0.15)",textAlign:"center"},children:[e.jsx(r,{variant:"caption",sx:{color:"rgba(255,255,255,0.9)",fontWeight:600,textTransform:"uppercase",letterSpacing:.5,display:"block",mb:1},children:"Final Average Score"}),e.jsx(r,{variant:"h3",sx:{color:"#fff",fontWeight:700,mb:.5},children:(()=>{const t=x.filter(h=>h.overall_score);return t.length===0?"0.0":(t.reduce((h,n)=>{const s=parseInt(n.originality_score||0,10),p=parseInt(n.relevance_score||0,10),B=parseInt(n.clarity_score||0,10),P=parseInt(n.methodology_score||0,10),E=parseInt(n.overall_score||0,10),U=(s+p+B+P+E)/5;return h+U},0)/t.length).toFixed(1)})()}),e.jsxs(r,{variant:"body2",sx:{color:"rgba(255,255,255,0.85)"},children:["Based on ",x.filter(t=>t.overall_score).length," reviewer",x.filter(t=>t.overall_score).length!==1?"s":""]})]}),e.jsx(l,{container:!0,spacing:2.5,children:x.map((t,d)=>{const n=(s=>{if(!s)return{bg:"#e0e0e0",text:"#666"};const p=s.toLowerCase();return p.includes("accept")?{bg:"#d4edda",text:"#155724",label:"Accepted"}:p.includes("reject")?{bg:"#f8d7da",text:"#721c24",label:"Rejected"}:p.includes("revision")?{bg:"#fff3cd",text:"#856404",label:"Revision Required"}:p.includes("minor")?{bg:"#cfe2ff",text:"#084298",label:"Minor Revision"}:p.includes("major")?{bg:"#fff3cd",text:"#664d03",label:"Major Revision"}:{bg:"#e7f3ff",text:"#0c5cb5",label:s}})(t.recommendation);return e.jsx(l,{item:!0,xs:12,md:6,children:e.jsxs(a,{sx:{position:"relative",p:2.5,backgroundColor:"#ffffff",borderRadius:2,border:"2px solid #e8eaed",boxShadow:"0 1px 3px rgba(0,0,0,0.08)",transition:"all 0.2s ease",height:"100%",display:"flex",flexDirection:"column","&:hover":{boxShadow:"0 4px 12px rgba(0,0,0,0.12)",transform:"translateY(-2px)",borderColor:"#006838"}},children:[t.recommendation&&e.jsx(a,{sx:{position:"absolute",top:12,right:12,px:1.5,py:.5,backgroundColor:n.bg,borderRadius:1,border:`1px solid ${n.text}40`},children:e.jsx(r,{variant:"caption",sx:{color:n.text,fontWeight:700,fontSize:"0.65rem",textTransform:"uppercase",letterSpacing:.3},children:n.label})}),e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:1.5,mb:2,pr:10},children:[e.jsx(a,{sx:{width:40,height:40,borderRadius:"50%",backgroundColor:"#006838",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(A,{sx:{color:"#fff",fontSize:22}})}),e.jsxs(a,{sx:{flex:1,minWidth:0},children:[e.jsx(r,{variant:"subtitle1",sx:{fontWeight:700,color:"#1a1a1a",lineHeight:1.3,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:t.reviewer?.name||"Admin"}),e.jsxs(r,{variant:"caption",sx:{color:"#9ca3af",fontSize:"0.75rem",display:"block"},children:["Reviewer #",d+1]})]})]}),t.overall_score&&(()=>{const s=((parseInt(t.originality_score||0,10)+parseInt(t.relevance_score||0,10)+parseInt(t.clarity_score||0,10)+parseInt(t.methodology_score||0,10)+parseInt(t.overall_score||0,10))/5).toFixed(1);return e.jsx(a,{sx:{mb:2,p:1.5,backgroundColor:s>=4?"#f0fdf4":"#fef3c7",borderRadius:1.5,border:`1px solid ${s>=4?"#86efac":"#fde047"}`,textAlign:"center"},children:e.jsxs(r,{variant:"h5",sx:{fontWeight:800,color:s>=4?"#15803d":"#ca8a04",letterSpacing:-.5},children:["Score: ",s]})})})(),e.jsx(a,{sx:{mb:2,flex:1},children:e.jsx(r,{variant:"body2",sx:{color:"#374151",lineHeight:1.7,whiteSpace:"pre-wrap",fontFamily:'"Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',fontSize:"0.9rem"},children:t.comments||t.feedback||"No feedback provided"})}),e.jsx(a,{sx:{pt:2,borderTop:"1px solid #e5e7eb",display:"flex",alignItems:"center",gap:.5},children:e.jsxs(r,{variant:"caption",sx:{color:"#9ca3af",fontSize:"0.75rem",fontStyle:"italic"},children:["Reviewed on ",new Date(t.created_at).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})]})})]})},t.id||d)})})]})})]})]})]})}export{oe as default};
